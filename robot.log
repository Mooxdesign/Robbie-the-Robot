[2025-06-22 17:57:46,386] [INFO] [MainThread] [TEST] Logging system initialized and test message written.
[2025-06-22 17:57:46,558] [INFO] [MainThread] PyAudio initialized successfully
[2025-06-22 17:57:46,558] [INFO] [MainThread] 
[AudioModule] Listing available audio input devices:
[2025-06-22 17:57:46,558] [INFO] [MainThread]   [0] Microsoft Sound Mapper - Input (inputs: 2)
[2025-06-22 17:57:46,558] [INFO] [MainThread]   [1] Microphone Array (Realtek(R) Au (inputs: 2)
[2025-06-22 17:57:46,558] [INFO] [MainThread]   [2] Stereo Mix (Realtek(R) Audio) (inputs: 2)
[2025-06-22 17:57:46,558] [INFO] [MainThread]   [5] Primary Sound Capture Driver (inputs: 2)
[2025-06-22 17:57:46,558] [INFO] [MainThread]   [6] Microphone Array (Realtek(R) Audio) (inputs: 2)
[2025-06-22 17:57:46,558] [INFO] [MainThread]   [7] Stereo Mix (Realtek(R) Audio) (inputs: 2)
[2025-06-22 17:57:46,561] [INFO] [MainThread]   [11] Stereo Mix (Realtek(R) Audio) (inputs: 2)
[2025-06-22 17:57:46,561] [INFO] [MainThread]   [12] Microphone Array (Realtek(R) Audio) (inputs: 2)
[2025-06-22 17:57:46,561] [INFO] [MainThread]   [14] Microphone (Realtek HD Audio Mic input) (inputs: 2)
[2025-06-22 17:57:46,561] [INFO] [MainThread]   [17] PC Speaker (Realtek HD Audio 2nd output with HAP) (inputs: 2)
[2025-06-22 17:57:46,561] [INFO] [MainThread]   [18] Stereo Mix (Realtek HD Audio Stereo input) (inputs: 2)
[2025-06-22 17:57:46,561] [INFO] [MainThread]   [21] PC Speaker (Realtek HD Audio output with HAP) (inputs: 2)
[2025-06-22 17:57:46,561] [INFO] [MainThread]   [22] Microphone Array (Realtek HD Audio Mic Array input) (inputs: 2)
[2025-06-22 17:57:46,561] [INFO] [MainThread]   [26] Headset (@System32\drivers\bthhfenum.sys,#2;%1 Hands-Free%0
;(soundcore Liberty 4 NC)) (inputs: 1)
[2025-06-22 17:57:46,561] [INFO] [MainThread]   [28] Headset (@System32\drivers\bthhfenum.sys,#2;%1 Hands-Free%0
;(SoundCore mini)) (inputs: 1)
[2025-06-22 17:57:46,561] [INFO] [MainThread]   [33] Headset (@System32\drivers\bthhfenum.sys,#2;%1 Hands-Free%0
;(J33)) (inputs: 1)
[2025-06-22 17:57:46,561] [INFO] [MainThread] [AudioModule] Using audio input device: Microphone Array (Realtek(R) Au (index: 1)
[2025-06-22 17:57:46,561] [INFO] [MainThread]   [AudioModule] Device default sample rate: 44100.0 Hz
[2025-06-22 17:57:46,563] [DEBUG] [MainThread] wake_word=porcupine, access_key=mVqSMp8bkU6jyFWGTKAxB8cMVEpz4CpOLghzFDJ9iDaxHmoKf2Agug==
[2025-06-22 17:57:46,635] [INFO] [Thread-2 (_output_monitor_loop)] [AudioModule] Output monitor started on device index 2
[2025-06-22 17:57:47,071] [INFO] [MainThread] Porcupine initialized
[2025-06-22 17:57:47,071] [DEBUG] [MainThread] [SpeechToTextModule] Using threading.RLock for _lock (reentrant)
[2025-06-22 17:57:47,743] [INFO] [MainThread] Whisper model loaded
[2025-06-22 17:57:47,744] [DEBUG] [MainThread] [SpeechToTextModule] Audio threshold set to -50 dB
[2025-06-22 17:57:47,978] [INFO] [Thread-3] [VoiceModule] Available voices:
[2025-06-22 17:57:47,979] [INFO] [Thread-3] - HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Speech\Voices\Tokens\TTS_MS_EN-US_DAVID_11.0: Microsoft David Desktop - English (United States) (languages=[], gender=None, age=None)
[2025-06-22 17:57:47,979] [INFO] [Thread-3] - HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Speech\Voices\Tokens\TTS_MS_EN-US_ZIRA_11.0: Microsoft Zira Desktop - English (United States) (languages=[], gender=None, age=None)
[2025-06-22 17:57:47,979] [INFO] [Thread-3] [VoiceModule] Selected preferred voice: Microsoft David Desktop - English (United States)
[2025-06-22 17:57:47,979] [INFO] [Thread-3] [VoiceModule] TTS engine initialized
[2025-06-22 17:57:48,143] [INFO] [MainThread] OpenAI initialized
[2025-06-22 17:57:48,153] [INFO] [MainThread] LED matrix initialized
[2025-06-22 17:57:48,673] [INFO] [MainThread] Camera initialized
[2025-06-22 17:57:48,675] [INFO] [MainThread] [API] Patched robot.leds.show for live LED matrix updates.
[2025-06-22 17:57:48,675] [INFO] [MainThread] [THREAD AUDIT] Background thread health auditor started.
[2025-06-22 17:57:48,675] [INFO] [MainThread] [MAIN] Starting robot controller...
[2025-06-22 17:57:48,675] [INFO] [MainThread] Starting robot...
[2025-06-22 17:57:48,675] [INFO] [MainThread] Returning to standby mode
[2025-06-22 17:57:48,675] [DEBUG] [MainThread] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:57:48,676] [DEBUG] [MainThread] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:57:48,706] [WARNING] [MainThread] [SpeechToTextModule] Not listening!
[2025-06-22 17:57:48,706] [DEBUG] [MainThread] [SpeechToTextModule] stop_listening: EXIT (was not listening)
[2025-06-22 17:57:48,720] [INFO] [MainThread] [AudioModule] Created stream id=16000_1_8_512_True_False type=input device=None rate=16000, channels=1, format=8, chunk_size=512
[2025-06-22 17:57:48,721] [INFO] [MainThread] Starting wake word detection
[2025-06-22 17:57:48,721] [INFO] [MainThread] State transition: RobotState.STANDBY -> RobotState.STANDBY
[2025-06-22 17:57:48,721] [INFO] [MainThread] [MAIN] Starting API server...
[2025-06-22 17:57:58,676] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:57:58,677] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 5
[2025-06-22 17:57:58,677] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:57:58,677] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:57:58,677] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:57:58,678] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:57:58,678] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:57:58,678] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:58:08,679] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:58:08,679] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 5
[2025-06-22 17:58:08,679] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:58:08,679] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:58:08,679] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:58:08,679] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:58:08,679] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:58:08,679] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:58:18,597] [INFO] [MainThread] [wake_up] Triggered: transitioning to LISTENING and starting speech recognition.
[2025-06-22 17:58:18,597] [INFO] [MainThread] Stopped wake word detection
[2025-06-22 17:58:18,628] [INFO] [MainThread] [AudioModule] Closed stream (id=16000_1_8_512_True_False) type=input device=None
[2025-06-22 17:58:18,628] [INFO] [MainThread] [SpeechToTextModule] start_listening called
[2025-06-22 17:58:18,629] [INFO] [MainThread] Using audio input device:
[2025-06-22 17:58:18,629] [DEBUG] [Thread-5 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 0)
[2025-06-22 17:58:18,629] [INFO] [MainThread]   Name: Microphone Array (Realtek(R) Au
[2025-06-22 17:58:18,629] [WARNING] [Thread-5 (_process_audio)] [Thread-5 (_process_audio)] No audio buffer to process.
[2025-06-22 17:58:18,629] [INFO] [MainThread]   Index: 1
[2025-06-22 17:58:18,629] [DEBUG] [Thread-5 (_process_audio)] [Thread-5 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:58:18,629] [INFO] [MainThread]   Sample Rate: 44100 Hz
[2025-06-22 17:58:18,629] [INFO] [MainThread]   Max Input Channels: 2
[2025-06-22 17:58:18,629] [INFO] [MainThread] 
[2025-06-22 17:58:18,632] [INFO] [MainThread] [SpeechToTextModule] Detected device sample rate: 44100
[2025-06-22 17:58:18,632] [INFO] [MainThread] [SpeechToTextModule] Creating audio stream with sample_rate=44100, chunk_size=2048
[2025-06-22 17:58:18,647] [INFO] [MainThread] [AudioModule] Created stream id=44100_1_8_2048_True_False type=input device=None rate=44100, channels=1, format=8, chunk_size=2048
[2025-06-22 17:58:18,647] [INFO] [MainThread] Starting speech recognition
[2025-06-22 17:58:18,647] [INFO] [MainThread] [SpeechToTextModule] Audio stream started (id=44100_1_8_2048_True_False)
[2025-06-22 17:58:18,647] [INFO] [MainThread] State transition: RobotState.STANDBY -> RobotState.LISTENING
[2025-06-22 17:58:18,681] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:58:18,704] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 5
[2025-06-22 17:58:18,704] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:58:18,706] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:58:18,708] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:58:18,708] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:58:18,708] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:58:18,708] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:58:18,922] [INFO] [Dummy-6] [SpeechToTextModule] Speech detected, starting buffer with pre-buffer (6 chunks)
[2025-06-22 17:58:20,428] [INFO] [MainThread] WebSocket client disconnected.
[2025-06-22 17:58:21,666] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.02s, processing phrase.
[2025-06-22 17:58:21,666] [DEBUG] [Dummy-6] [SpeechToTextModule] Starting _process_audio thread (buffer size: 66)
[2025-06-22 17:58:21,668] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 66)
[2025-06-22 17:58:21,669] [DEBUG] [Thread-7 (_process_audio)] [Thread-7 (_process_audio)] Audio buffer stats: len=135168, duration=3.065s, dtype=float32, min=-0.0724, max=0.0578, mean=-0.0000
[2025-06-22 17:58:21,783] [INFO] [Dummy-6] [SpeechToTextModule] Speech detected, starting buffer with pre-buffer (2 chunks)
[2025-06-22 17:58:22,068] [DEBUG] [MainThread] [wake_up] Ignored: not in STANDBY (current state: RobotState.LISTENING)
[2025-06-22 17:58:22,199] [INFO] [MainThread] WebSocket client disconnected.
[2025-06-22 17:58:22,680] [INFO] [Thread-7 (_process_audio)] [SpeechToTextModule] Resampled audio from 44100 Hz to 16000 Hz (len 135168 -> 49040)
[2025-06-22 17:58:22,680] [DEBUG] [Thread-7 (_process_audio)] [DEBUG] Saved audio buffer to debug_transcription_input.wav
[2025-06-22 17:58:22,680] [DEBUG] [Thread-7 (_process_audio)] [Thread-7 (_process_audio)] Processing 49040 samples.
[2025-06-22 17:58:22,680] [INFO] [Thread-7 (_process_audio)] [Thread-7 (_process_audio)] Transcribing audio... (buffer len: 20)
[2025-06-22 17:58:23,416] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.02s, processing phrase.
[2025-06-22 17:58:23,466] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.07s, processing phrase.
[2025-06-22 17:58:23,512] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.12s, processing phrase.
[2025-06-22 17:58:23,554] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.16s, processing phrase.
[2025-06-22 17:58:23,606] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.21s, processing phrase.
[2025-06-22 17:58:23,643] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.25s, processing phrase.
[2025-06-22 17:58:23,692] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.30s, processing phrase.
[2025-06-22 17:58:23,748] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.35s, processing phrase.
[2025-06-22 17:58:23,784] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.39s, processing phrase.
[2025-06-22 17:58:23,832] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.44s, processing phrase.
[2025-06-22 17:58:23,883] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.49s, processing phrase.
[2025-06-22 17:58:23,925] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.53s, processing phrase.
[2025-06-22 17:58:23,975] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.58s, processing phrase.
[2025-06-22 17:58:24,025] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.63s, processing phrase.
[2025-06-22 17:58:24,064] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.67s, processing phrase.
[2025-06-22 17:58:24,115] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.72s, processing phrase.
[2025-06-22 17:58:24,166] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.77s, processing phrase.
[2025-06-22 17:58:24,202] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.81s, processing phrase.
[2025-06-22 17:58:24,251] [INFO] [Dummy-6] [SpeechToTextModule] Silence detected for 1.86s, processing phrase.
[2025-06-22 17:58:24,269] [INFO] [Thread-7 (_process_audio)] [Thread-7 (_process_audio)] Whisper transcription result: ' You have to do this.'
[2025-06-22 17:58:24,269] [DEBUG] [Thread-7 (_process_audio)] [Thread-7 (_process_audio)] Transcription callbacks: [<bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>]
[2025-06-22 17:58:24,271] [DEBUG] [Thread-7 (_process_audio)] [Thread-7 (_process_audio)] Invoking transcription callback with text: ' You have to do this.' (callback: <bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>)
[2025-06-22 17:58:24,271] [INFO] [Thread-7 (_process_audio)] Transcribed:  You have to do this.
[2025-06-22 17:58:24,272] [INFO] [Thread-7 (_process_audio)] State transition: RobotState.LISTENING -> RobotState.PROCESSING
[2025-06-22 17:58:24,278] [DEBUG] [Thread-7 (_process_audio)] Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are Robbie the Robot, a robot who is being built by Heidi and Heidi's daddy. Your responses should be mostly short, kind, off-kilter, and suitable for a 6 year old. No sound effects."}, {'role': 'user', 'content': ' You have to do this.'}], 'model': 'gpt-3.5-turbo', 'temperature': 0.7}}
[2025-06-22 17:58:24,297] [DEBUG] [Thread-7 (_process_audio)] Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
[2025-06-22 17:58:24,298] [DEBUG] [Thread-7 (_process_audio)] connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
[2025-06-22 17:58:24,359] [DEBUG] [Thread-7 (_process_audio)] connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001436F913AD0>
[2025-06-22 17:58:24,360] [DEBUG] [Thread-7 (_process_audio)] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000143671FA600> server_hostname='api.openai.com' timeout=5.0
[2025-06-22 17:58:24,386] [DEBUG] [Thread-7 (_process_audio)] start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437F3337D0>
[2025-06-22 17:58:24,386] [DEBUG] [Thread-7 (_process_audio)] send_request_headers.started request=<Request [b'POST']>
[2025-06-22 17:58:24,387] [DEBUG] [Thread-7 (_process_audio)] send_request_headers.complete
[2025-06-22 17:58:24,387] [DEBUG] [Thread-7 (_process_audio)] send_request_body.started request=<Request [b'POST']>
[2025-06-22 17:58:24,387] [DEBUG] [Thread-7 (_process_audio)] send_request_body.complete
[2025-06-22 17:58:24,387] [DEBUG] [Thread-7 (_process_audio)] receive_response_headers.started request=<Request [b'POST']>
[2025-06-22 17:58:24,679] [DEBUG] [Thread-7 (_process_audio)] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 22 Jun 2025 16:58:23 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-ymc93dgeojv8fh6cqrik8kuj'), (b'openai-processing-ms', b'159'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'162'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199945'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'16ms'), (b'x-request-id', b'req_112fbbcc00d569bd233647d1e099a6c0'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=Ecb4_n0UYJd85XLqz8AuZjWFD8OlqsSK08q4mwgOyyk-1750611503-1.0.1.1-NzYQsWDK44yweHw70HMVuXKoKTjzRaYZr37GiXeA9xz3YtY1kWUDA9QLx6cngVKqKD25oAbbq9CKkSgV7.d7EHpPYFaYsTeOxS2CSExT40E; path=/; expires=Sun, 22-Jun-25 17:28:23 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Iw6T280KnQBBusuEFsnSKO6bOK4tJ4jo09_W6FCCh3E-1750611503265-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'953d4a45ac6e6974-MAN'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
[2025-06-22 17:58:24,680] [INFO] [Thread-7 (_process_audio)] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-06-22 17:58:24,680] [DEBUG] [Thread-7 (_process_audio)] receive_response_body.started request=<Request [b'POST']>
[2025-06-22 17:58:24,680] [DEBUG] [Thread-7 (_process_audio)] receive_response_body.complete
[2025-06-22 17:58:24,682] [DEBUG] [Thread-7 (_process_audio)] response_closed.started
[2025-06-22 17:58:24,682] [DEBUG] [Thread-7 (_process_audio)] response_closed.complete
[2025-06-22 17:58:24,682] [DEBUG] [Thread-7 (_process_audio)] HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Sun, 22 Jun 2025 16:58:23 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-ymc93dgeojv8fh6cqrik8kuj'), ('openai-processing-ms', '159'), ('openai-version', '2020-10-01'), ('x-envoy-upstream-service-time', '162'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '200000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '199945'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '16ms'), ('x-request-id', 'req_112fbbcc00d569bd233647d1e099a6c0'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=Ecb4_n0UYJd85XLqz8AuZjWFD8OlqsSK08q4mwgOyyk-1750611503-1.0.1.1-NzYQsWDK44yweHw70HMVuXKoKTjzRaYZr37GiXeA9xz3YtY1kWUDA9QLx6cngVKqKD25oAbbq9CKkSgV7.d7EHpPYFaYsTeOxS2CSExT40E; path=/; expires=Sun, 22-Jun-25 17:28:23 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=Iw6T280KnQBBusuEFsnSKO6bOK4tJ4jo09_W6FCCh3E-1750611503265-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '953d4a45ac6e6974-MAN'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
[2025-06-22 17:58:24,683] [DEBUG] [Thread-7 (_process_audio)] request_id: req_112fbbcc00d569bd233647d1e099a6c0
[2025-06-22 17:58:24,691] [INFO] [Thread-7 (_process_audio)] Robbie: Why not give it a try?
[2025-06-22 17:58:24,691] [INFO] [Thread-7 (_process_audio)] [DEBUG] Type of response: <class 'str'> Value: 'Why not give it a try?'
[2025-06-22 17:58:24,691] [DEBUG] [Thread-7 (_process_audio)] [DEBUG] About to attempt stop_listening and state change
[2025-06-22 17:58:24,691] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:58:24,691] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:58:24,693] [INFO] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening called
[2025-06-22 17:58:24,693] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening: stream_id=44100_1_8_2048_True_False
[2025-06-22 17:58:24,693] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening: about to get stream_info
[2025-06-22 17:58:24,693] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening: got stream_info={'type': 'input', 'device_index': None}
[2025-06-22 17:58:24,694] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening: about to close_stream
[2025-06-22 17:58:26,707] [INFO] [Thread-7 (_process_audio)] [AudioModule] Closed stream (id=44100_1_8_2048_True_False) type=input device=None
[2025-06-22 17:58:26,708] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening: closed stream
[2025-06-22 17:58:26,708] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening: set _stream_id to None
[2025-06-22 17:58:26,708] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (success)
[2025-06-22 17:58:26,708] [INFO] [Thread-7 (_process_audio)] Processing remaining audio before stopping
[2025-06-22 17:58:26,708] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 36)
[2025-06-22 17:58:26,710] [WARNING] [Thread-7 (_process_audio)] [_process_audio] Called while not listening, skipping.
[2025-06-22 17:58:26,710] [INFO] [Thread-7 (_process_audio)] [on_silence_timeout] Silence timeout occurred. Returning to STANDBY.
[2025-06-22 17:58:26,710] [INFO] [Thread-7 (_process_audio)] Returning to standby mode
[2025-06-22 17:58:26,710] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:58:26,711] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:58:26,711] [WARNING] [Thread-7 (_process_audio)] [SpeechToTextModule] Not listening!
[2025-06-22 17:58:26,711] [DEBUG] [Thread-7 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (was not listening)
[2025-06-22 17:58:26,728] [INFO] [Thread-7 (_process_audio)] [AudioModule] Created stream id=16000_1_8_512_True_False type=input device=None rate=16000, channels=1, format=8, chunk_size=512
[2025-06-22 17:58:26,728] [INFO] [Thread-7 (_process_audio)] Starting wake word detection
[2025-06-22 17:58:26,728] [INFO] [Thread-7 (_process_audio)] State transition: RobotState.PROCESSING -> RobotState.STANDBY
[2025-06-22 17:58:26,730] [INFO] [Thread-7 (_process_audio)] [DEBUG] Called stop_listening()
[2025-06-22 17:58:26,730] [INFO] [Thread-7 (_process_audio)] State transition: RobotState.STANDBY -> RobotState.SPEAKING
[2025-06-22 17:58:26,731] [INFO] [Thread-7 (_process_audio)] [DEBUG] Called _set_state(SPEAKING)
[2025-06-22 17:58:26,731] [DEBUG] [Thread-7 (_process_audio)] [SpeechController] About to call self.voice.say with: Why not give it a try?
[2025-06-22 17:58:26,731] [DEBUG] [Thread-7 (_process_audio)] [VoiceModule] say() called with: Why not give it a try? (blocking=False)
[2025-06-22 17:58:26,731] [DEBUG] [Thread-7 (_process_audio)] [VoiceModule] State: is_alive=True, engine=<pyttsx3.engine.Engine object at 0x0000014365D5BA10>
[2025-06-22 17:58:26,731] [DEBUG] [Thread-7 (_process_audio)] [VoiceModule] Queued speech: 'Why not give it a try?' (blocking=False)
[2025-06-22 17:58:26,731] [DEBUG] [Thread-7 (_process_audio)] [SpeechController] self.voice.say call complete
[2025-06-22 17:58:26,731] [INFO] [Thread-3] [VoiceModule] Called engine.say() for: 'Why not give it a try?'
[2025-06-22 17:58:26,733] [DEBUG] [Thread-7 (_process_audio)] [Thread-7 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:58:28,710] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:58:28,710] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 7
[2025-06-22 17:58:28,710] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:58:28,710] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:58:28,712] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:58:28,713] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:58:28,713] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:58:28,713] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:58:29,434] [DEBUG] [Thread-3] [VoiceModule] _on_completed called: name=None, completed=True
[2025-06-22 17:58:29,434] [INFO] [Thread-3] Speech completed: None
[2025-06-22 17:58:29,434] [DEBUG] [Thread-3] [VoiceModule] Notifying completion callbacks
[2025-06-22 17:58:29,434] [DEBUG] [Thread-3] [VoiceModule] Calling completion callback: <bound method SpeechController.on_speech_complete of <controller.speech.SpeechController object at 0x0000014365E0C110>>
[2025-06-22 17:58:29,434] [INFO] [Thread-3] [on_speech_complete] Speech finished. Transitioning to LISTENING and starting speech-to-text.
[2025-06-22 17:58:29,434] [INFO] [Thread-3] State transition: RobotState.SPEAKING -> RobotState.LISTENING
[2025-06-22 17:58:29,434] [INFO] [Thread-3] [SpeechToTextModule] start_listening called
[2025-06-22 17:58:29,437] [INFO] [Thread-3] Using audio input device:
[2025-06-22 17:58:29,437] [DEBUG] [Thread-9 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 0)
[2025-06-22 17:58:29,437] [INFO] [Thread-3]   Name: Microphone Array (Realtek(R) Au
[2025-06-22 17:58:29,437] [WARNING] [Thread-9 (_process_audio)] [Thread-9 (_process_audio)] No audio buffer to process.
[2025-06-22 17:58:29,437] [INFO] [Thread-3]   Index: 1
[2025-06-22 17:58:29,439] [DEBUG] [Thread-9 (_process_audio)] [Thread-9 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:58:29,439] [INFO] [Thread-3]   Sample Rate: 44100 Hz
[2025-06-22 17:58:29,439] [INFO] [Thread-3]   Max Input Channels: 2
[2025-06-22 17:58:29,439] [INFO] [Thread-3] 
[2025-06-22 17:58:29,441] [INFO] [Thread-3] [SpeechToTextModule] Detected device sample rate: 44100
[2025-06-22 17:58:29,441] [INFO] [Thread-3] [SpeechToTextModule] Creating audio stream with sample_rate=44100, chunk_size=2048
[2025-06-22 17:58:29,454] [INFO] [Thread-3] [AudioModule] Created stream id=44100_1_8_2048_True_False type=input device=None rate=44100, channels=1, format=8, chunk_size=2048
[2025-06-22 17:58:29,456] [INFO] [Thread-3] Starting speech recognition
[2025-06-22 17:58:29,456] [INFO] [Thread-3] [SpeechToTextModule] Audio stream started (id=44100_1_8_2048_True_False)
[2025-06-22 17:58:29,456] [DEBUG] [Thread-3] [VoiceModule] All completion callbacks notified
[2025-06-22 17:58:29,456] [DEBUG] [Thread-3] [VoiceModule] _notify_completion called from _on_completed
[2025-06-22 17:58:29,508] [INFO] [Thread-3] [VoiceModule] Finished engine.runAndWait() for: 'Why not give it a try?'
[2025-06-22 17:58:31,685] [INFO] [Dummy-10] [SpeechToTextModule] Speech detected, starting buffer with pre-buffer (7 chunks)
[2025-06-22 17:58:33,452] [INFO] [Dummy-10] [SpeechToTextModule] Silence detected for 1.02s, processing phrase.
[2025-06-22 17:58:33,452] [DEBUG] [Dummy-10] [SpeechToTextModule] Starting _process_audio thread (buffer size: 46)
[2025-06-22 17:58:33,455] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 46)
[2025-06-22 17:58:33,456] [DEBUG] [Thread-11 (_process_audio)] [Thread-11 (_process_audio)] Audio buffer stats: len=94208, duration=2.136s, dtype=float32, min=-0.3770, max=0.4261, mean=-0.0000
[2025-06-22 17:58:33,463] [INFO] [Thread-11 (_process_audio)] [SpeechToTextModule] Resampled audio from 44100 Hz to 16000 Hz (len 94208 -> 34179)
[2025-06-22 17:58:33,466] [DEBUG] [Thread-11 (_process_audio)] [DEBUG] Saved audio buffer to debug_transcription_input.wav
[2025-06-22 17:58:33,467] [DEBUG] [Thread-11 (_process_audio)] [Thread-11 (_process_audio)] Processing 34179 samples.
[2025-06-22 17:58:33,468] [INFO] [Thread-11 (_process_audio)] [Thread-11 (_process_audio)] Transcribing audio... (buffer len: 0)
[2025-06-22 17:58:34,595] [INFO] [Thread-11 (_process_audio)] [Thread-11 (_process_audio)] Whisper transcription result: ' Give what to try.'
[2025-06-22 17:58:34,597] [DEBUG] [Thread-11 (_process_audio)] [Thread-11 (_process_audio)] Transcription callbacks: [<bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>]
[2025-06-22 17:58:34,597] [DEBUG] [Thread-11 (_process_audio)] [Thread-11 (_process_audio)] Invoking transcription callback with text: ' Give what to try.' (callback: <bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>)
[2025-06-22 17:58:34,597] [INFO] [Thread-11 (_process_audio)] Transcribed:  Give what to try.
[2025-06-22 17:58:34,599] [INFO] [Thread-11 (_process_audio)] State transition: RobotState.LISTENING -> RobotState.PROCESSING
[2025-06-22 17:58:34,607] [DEBUG] [Thread-11 (_process_audio)] Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are Robbie the Robot, a robot who is being built by Heidi and Heidi's daddy. Your responses should be mostly short, kind, off-kilter, and suitable for a 6 year old. No sound effects."}, {'role': 'user', 'content': ' You have to do this.'}, {'role': 'assistant', 'content': 'Why not give it a try?'}, {'role': 'user', 'content': ' Give what to try.'}], 'model': 'gpt-3.5-turbo', 'temperature': 0.7}}
[2025-06-22 17:58:34,608] [DEBUG] [Thread-11 (_process_audio)] Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
[2025-06-22 17:58:34,608] [DEBUG] [Thread-11 (_process_audio)] close.started
[2025-06-22 17:58:34,610] [DEBUG] [Thread-11 (_process_audio)] close.complete
[2025-06-22 17:58:34,610] [DEBUG] [Thread-11 (_process_audio)] connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
[2025-06-22 17:58:34,626] [DEBUG] [Thread-11 (_process_audio)] connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FAF7250>
[2025-06-22 17:58:34,626] [DEBUG] [Thread-11 (_process_audio)] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000143671FA600> server_hostname='api.openai.com' timeout=5.0
[2025-06-22 17:58:34,645] [DEBUG] [Thread-11 (_process_audio)] start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FB06A10>
[2025-06-22 17:58:34,645] [DEBUG] [Thread-11 (_process_audio)] send_request_headers.started request=<Request [b'POST']>
[2025-06-22 17:58:34,646] [DEBUG] [Thread-11 (_process_audio)] send_request_headers.complete
[2025-06-22 17:58:34,647] [DEBUG] [Thread-11 (_process_audio)] send_request_body.started request=<Request [b'POST']>
[2025-06-22 17:58:34,647] [DEBUG] [Thread-11 (_process_audio)] send_request_body.complete
[2025-06-22 17:58:34,647] [DEBUG] [Thread-11 (_process_audio)] receive_response_headers.started request=<Request [b'POST']>
[2025-06-22 17:58:35,000] [DEBUG] [Thread-11 (_process_audio)] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 22 Jun 2025 16:58:33 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-ymc93dgeojv8fh6cqrik8kuj'), (b'openai-processing-ms', b'209'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'212'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199932'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'20ms'), (b'x-request-id', b'req_266a9507d2e0ee00589157ee8476faa9'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'953d4a85ca89b101-MAN'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
[2025-06-22 17:58:35,000] [INFO] [Thread-11 (_process_audio)] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-06-22 17:58:35,000] [DEBUG] [Thread-11 (_process_audio)] receive_response_body.started request=<Request [b'POST']>
[2025-06-22 17:58:35,000] [DEBUG] [Thread-11 (_process_audio)] receive_response_body.complete
[2025-06-22 17:58:35,000] [DEBUG] [Thread-11 (_process_audio)] response_closed.started
[2025-06-22 17:58:35,000] [DEBUG] [Thread-11 (_process_audio)] response_closed.complete
[2025-06-22 17:58:35,003] [DEBUG] [Thread-11 (_process_audio)] HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Sun, 22 Jun 2025 16:58:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-ymc93dgeojv8fh6cqrik8kuj', 'openai-processing-ms': '209', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '212', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '200000', 'x-ratelimit-remaining-requests': '9999', 'x-ratelimit-remaining-tokens': '199932', 'x-ratelimit-reset-requests': '8.64s', 'x-ratelimit-reset-tokens': '20ms', 'x-request-id': 'req_266a9507d2e0ee00589157ee8476faa9', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '953d4a85ca89b101-MAN', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
[2025-06-22 17:58:35,003] [DEBUG] [Thread-11 (_process_audio)] request_id: req_266a9507d2e0ee00589157ee8476faa9
[2025-06-22 17:58:35,003] [INFO] [Thread-11 (_process_audio)] Robbie: Let's solve the mystery together!
[2025-06-22 17:58:35,004] [INFO] [Thread-11 (_process_audio)] [DEBUG] Type of response: <class 'str'> Value: "Let's solve the mystery together!"
[2025-06-22 17:58:35,004] [DEBUG] [Thread-11 (_process_audio)] [DEBUG] About to attempt stop_listening and state change
[2025-06-22 17:58:35,004] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:58:35,004] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:58:35,004] [INFO] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening called
[2025-06-22 17:58:35,004] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening: stream_id=44100_1_8_2048_True_False
[2025-06-22 17:58:35,004] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening: about to get stream_info
[2025-06-22 17:58:35,006] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening: got stream_info={'type': 'input', 'device_index': None}
[2025-06-22 17:58:35,006] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening: about to close_stream
[2025-06-22 17:58:37,016] [INFO] [Thread-11 (_process_audio)] [AudioModule] Closed stream (id=44100_1_8_2048_True_False) type=input device=None
[2025-06-22 17:58:37,016] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening: closed stream
[2025-06-22 17:58:37,018] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening: set _stream_id to None
[2025-06-22 17:58:37,018] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (success)
[2025-06-22 17:58:37,018] [INFO] [Thread-11 (_process_audio)] [on_silence_timeout] Silence timeout occurred. Returning to STANDBY.
[2025-06-22 17:58:37,018] [INFO] [Thread-11 (_process_audio)] Returning to standby mode
[2025-06-22 17:58:37,018] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:58:37,018] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:58:37,018] [WARNING] [Thread-11 (_process_audio)] [SpeechToTextModule] Not listening!
[2025-06-22 17:58:37,018] [DEBUG] [Thread-11 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (was not listening)
[2025-06-22 17:58:37,018] [WARNING] [Thread-11 (_process_audio)] Cannot start wake word: already listening=True, porcupine=True
[2025-06-22 17:58:37,018] [INFO] [Thread-11 (_process_audio)] State transition: RobotState.PROCESSING -> RobotState.STANDBY
[2025-06-22 17:58:37,018] [INFO] [Thread-11 (_process_audio)] [DEBUG] Called stop_listening()
[2025-06-22 17:58:37,018] [INFO] [Thread-11 (_process_audio)] State transition: RobotState.STANDBY -> RobotState.SPEAKING
[2025-06-22 17:58:37,021] [INFO] [Thread-11 (_process_audio)] [DEBUG] Called _set_state(SPEAKING)
[2025-06-22 17:58:37,021] [DEBUG] [Thread-11 (_process_audio)] [SpeechController] About to call self.voice.say with: Let's solve the mystery together!
[2025-06-22 17:58:37,021] [DEBUG] [Thread-11 (_process_audio)] [VoiceModule] say() called with: Let's solve the mystery together! (blocking=False)
[2025-06-22 17:58:37,021] [DEBUG] [Thread-11 (_process_audio)] [VoiceModule] State: is_alive=True, engine=<pyttsx3.engine.Engine object at 0x0000014365D5BA10>
[2025-06-22 17:58:37,021] [DEBUG] [Thread-11 (_process_audio)] [VoiceModule] Queued speech: 'Let's solve the mystery together!' (blocking=False)
[2025-06-22 17:58:37,021] [DEBUG] [Thread-11 (_process_audio)] [SpeechController] self.voice.say call complete
[2025-06-22 17:58:37,021] [INFO] [Thread-3] [VoiceModule] Called engine.say() for: 'Let's solve the mystery together!'
[2025-06-22 17:58:37,021] [DEBUG] [Thread-11 (_process_audio)] [Thread-11 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:58:38,714] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:58:38,714] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 8
[2025-06-22 17:58:38,715] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:58:38,715] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:58:38,715] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:58:38,715] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:58:38,715] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:58:38,715] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:58:40,057] [DEBUG] [Thread-3] [VoiceModule] _on_completed called: name=None, completed=True
[2025-06-22 17:58:40,057] [INFO] [Thread-3] Speech completed: None
[2025-06-22 17:58:40,057] [DEBUG] [Thread-3] [VoiceModule] Notifying completion callbacks
[2025-06-22 17:58:40,058] [DEBUG] [Thread-3] [VoiceModule] Calling completion callback: <bound method SpeechController.on_speech_complete of <controller.speech.SpeechController object at 0x0000014365E0C110>>
[2025-06-22 17:58:40,058] [INFO] [Thread-3] [on_speech_complete] Speech finished. Transitioning to LISTENING and starting speech-to-text.
[2025-06-22 17:58:40,058] [INFO] [Thread-3] State transition: RobotState.SPEAKING -> RobotState.LISTENING
[2025-06-22 17:58:40,058] [INFO] [Thread-3] [SpeechToTextModule] start_listening called
[2025-06-22 17:58:40,059] [INFO] [Thread-3] Using audio input device:
[2025-06-22 17:58:40,059] [DEBUG] [Thread-12 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 0)
[2025-06-22 17:58:40,059] [INFO] [Thread-3]   Name: Microphone Array (Realtek(R) Au
[2025-06-22 17:58:40,060] [WARNING] [Thread-12 (_process_audio)] [Thread-12 (_process_audio)] No audio buffer to process.
[2025-06-22 17:58:40,060] [INFO] [Thread-3]   Index: 1
[2025-06-22 17:58:40,060] [DEBUG] [Thread-12 (_process_audio)] [Thread-12 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:58:40,060] [INFO] [Thread-3]   Sample Rate: 44100 Hz
[2025-06-22 17:58:40,060] [INFO] [Thread-3]   Max Input Channels: 2
[2025-06-22 17:58:40,060] [INFO] [Thread-3] 
[2025-06-22 17:58:40,060] [INFO] [Thread-3] [SpeechToTextModule] Detected device sample rate: 44100
[2025-06-22 17:58:40,062] [INFO] [Thread-3] [SpeechToTextModule] Creating audio stream with sample_rate=44100, chunk_size=2048
[2025-06-22 17:58:40,083] [INFO] [Thread-3] [AudioModule] Created stream id=44100_1_8_2048_True_False type=input device=None rate=44100, channels=1, format=8, chunk_size=2048
[2025-06-22 17:58:40,083] [INFO] [Thread-3] Starting speech recognition
[2025-06-22 17:58:40,085] [INFO] [Thread-3] [SpeechToTextModule] Audio stream started (id=44100_1_8_2048_True_False)
[2025-06-22 17:58:40,086] [DEBUG] [Thread-3] [VoiceModule] All completion callbacks notified
[2025-06-22 17:58:40,086] [DEBUG] [Thread-3] [VoiceModule] _notify_completion called from _on_completed
[2025-06-22 17:58:40,138] [INFO] [Thread-3] [VoiceModule] Finished engine.runAndWait() for: 'Let's solve the mystery together!'
[2025-06-22 17:58:42,505] [INFO] [Dummy-13] [SpeechToTextModule] Speech detected, starting buffer with pre-buffer (7 chunks)
[2025-06-22 17:58:47,614] [INFO] [Dummy-13] [SpeechToTextModule] Silence detected for 1.02s, processing phrase.
[2025-06-22 17:58:47,614] [DEBUG] [Dummy-13] [SpeechToTextModule] Starting _process_audio thread (buffer size: 118)
[2025-06-22 17:58:47,615] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 118)
[2025-06-22 17:58:47,616] [DEBUG] [Thread-14 (_process_audio)] [Thread-14 (_process_audio)] Audio buffer stats: len=241664, duration=5.480s, dtype=float32, min=-0.2346, max=0.2891, mean=-0.0000
[2025-06-22 17:58:47,637] [INFO] [Thread-14 (_process_audio)] [SpeechToTextModule] Resampled audio from 44100 Hz to 16000 Hz (len 241664 -> 87678)
[2025-06-22 17:58:47,639] [DEBUG] [Thread-14 (_process_audio)] [DEBUG] Saved audio buffer to debug_transcription_input.wav
[2025-06-22 17:58:47,639] [DEBUG] [Thread-14 (_process_audio)] [Thread-14 (_process_audio)] Processing 87678 samples.
[2025-06-22 17:58:47,639] [INFO] [Thread-14 (_process_audio)] [Thread-14 (_process_audio)] Transcribing audio... (buffer len: 0)
[2025-06-22 17:58:48,718] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:58:48,725] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 10
[2025-06-22 17:58:48,725] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:58:48,727] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:58:48,728] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:58:48,728] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:58:48,728] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:58:48,728] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:58:49,678] [INFO] [Thread-14 (_process_audio)] [Thread-14 (_process_audio)] Whisper transcription result: ' Ah What miss? Don't let it stop. Don't worry.'
[2025-06-22 17:58:49,700] [DEBUG] [Thread-14 (_process_audio)] [Thread-14 (_process_audio)] Transcription callbacks: [<bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>]
[2025-06-22 17:58:49,700] [DEBUG] [Thread-14 (_process_audio)] [Thread-14 (_process_audio)] Invoking transcription callback with text: ' Ah What miss? Don't let it stop. Don't worry.' (callback: <bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>)
[2025-06-22 17:58:49,705] [INFO] [Thread-14 (_process_audio)] Transcribed:  Ah What miss? Don't let it stop. Don't worry.
[2025-06-22 17:58:49,706] [INFO] [Thread-14 (_process_audio)] State transition: RobotState.LISTENING -> RobotState.PROCESSING
[2025-06-22 17:58:49,721] [DEBUG] [Thread-14 (_process_audio)] Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are Robbie the Robot, a robot who is being built by Heidi and Heidi's daddy. Your responses should be mostly short, kind, off-kilter, and suitable for a 6 year old. No sound effects."}, {'role': 'user', 'content': ' You have to do this.'}, {'role': 'assistant', 'content': 'Why not give it a try?'}, {'role': 'user', 'content': ' Give what to try.'}, {'role': 'assistant', 'content': "Let's solve the mystery together!"}, {'role': 'user', 'content': " Ah What miss? Don't let it stop. Don't worry."}], 'model': 'gpt-3.5-turbo', 'temperature': 0.7}}
[2025-06-22 17:58:49,723] [DEBUG] [Thread-14 (_process_audio)] Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
[2025-06-22 17:58:49,723] [DEBUG] [Thread-14 (_process_audio)] close.started
[2025-06-22 17:58:49,723] [DEBUG] [Thread-14 (_process_audio)] close.complete
[2025-06-22 17:58:49,725] [DEBUG] [Thread-14 (_process_audio)] connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
[2025-06-22 17:58:49,732] [DEBUG] [Thread-14 (_process_audio)] connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FB1D110>
[2025-06-22 17:58:49,733] [DEBUG] [Thread-14 (_process_audio)] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000143671FA600> server_hostname='api.openai.com' timeout=5.0
[2025-06-22 17:58:49,746] [DEBUG] [Thread-14 (_process_audio)] start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FB1CC90>
[2025-06-22 17:58:49,746] [DEBUG] [Thread-14 (_process_audio)] send_request_headers.started request=<Request [b'POST']>
[2025-06-22 17:58:49,747] [DEBUG] [Thread-14 (_process_audio)] send_request_headers.complete
[2025-06-22 17:58:49,748] [DEBUG] [Thread-14 (_process_audio)] send_request_body.started request=<Request [b'POST']>
[2025-06-22 17:58:49,748] [DEBUG] [Thread-14 (_process_audio)] send_request_body.complete
[2025-06-22 17:58:49,748] [DEBUG] [Thread-14 (_process_audio)] receive_response_headers.started request=<Request [b'POST']>
[2025-06-22 17:58:50,113] [DEBUG] [Thread-14 (_process_audio)] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 22 Jun 2025 16:58:48 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-ymc93dgeojv8fh6cqrik8kuj'), (b'openai-processing-ms', b'230'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'236'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199911'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'26ms'), (b'x-request-id', b'req_6d9440bee406eebfe2955bc535273916'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'953d4ae42b201b2d-MAN'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
[2025-06-22 17:58:50,113] [INFO] [Thread-14 (_process_audio)] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-06-22 17:58:50,113] [DEBUG] [Thread-14 (_process_audio)] receive_response_body.started request=<Request [b'POST']>
[2025-06-22 17:58:50,115] [DEBUG] [Thread-14 (_process_audio)] receive_response_body.complete
[2025-06-22 17:58:50,115] [DEBUG] [Thread-14 (_process_audio)] response_closed.started
[2025-06-22 17:58:50,115] [DEBUG] [Thread-14 (_process_audio)] response_closed.complete
[2025-06-22 17:58:50,115] [DEBUG] [Thread-14 (_process_audio)] HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Sun, 22 Jun 2025 16:58:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-ymc93dgeojv8fh6cqrik8kuj', 'openai-processing-ms': '230', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '236', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '200000', 'x-ratelimit-remaining-requests': '9999', 'x-ratelimit-remaining-tokens': '199911', 'x-ratelimit-reset-requests': '8.64s', 'x-ratelimit-reset-tokens': '26ms', 'x-request-id': 'req_6d9440bee406eebfe2955bc535273916', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '953d4ae42b201b2d-MAN', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
[2025-06-22 17:58:50,116] [DEBUG] [Thread-14 (_process_audio)] request_id: req_6d9440bee406eebfe2955bc535273916
[2025-06-22 17:58:50,118] [INFO] [Thread-14 (_process_audio)] Robbie: Don't worry, I'll keep going!
[2025-06-22 17:58:50,118] [INFO] [Thread-14 (_process_audio)] [DEBUG] Type of response: <class 'str'> Value: "Don't worry, I'll keep going!"
[2025-06-22 17:58:50,118] [DEBUG] [Thread-14 (_process_audio)] [DEBUG] About to attempt stop_listening and state change
[2025-06-22 17:58:50,118] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:58:50,118] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:58:50,118] [INFO] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening called
[2025-06-22 17:58:50,119] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening: stream_id=44100_1_8_2048_True_False
[2025-06-22 17:58:50,119] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening: about to get stream_info
[2025-06-22 17:58:50,119] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening: got stream_info={'type': 'input', 'device_index': None}
[2025-06-22 17:58:50,120] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening: about to close_stream
[2025-06-22 17:58:52,131] [INFO] [Thread-14 (_process_audio)] [AudioModule] Closed stream (id=44100_1_8_2048_True_False) type=input device=None
[2025-06-22 17:58:52,131] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening: closed stream
[2025-06-22 17:58:52,131] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening: set _stream_id to None
[2025-06-22 17:58:52,133] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (success)
[2025-06-22 17:58:52,133] [INFO] [Thread-14 (_process_audio)] [on_silence_timeout] Silence timeout occurred. Returning to STANDBY.
[2025-06-22 17:58:52,133] [INFO] [Thread-14 (_process_audio)] Returning to standby mode
[2025-06-22 17:58:52,133] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:58:52,133] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:58:52,133] [WARNING] [Thread-14 (_process_audio)] [SpeechToTextModule] Not listening!
[2025-06-22 17:58:52,133] [DEBUG] [Thread-14 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (was not listening)
[2025-06-22 17:58:52,133] [WARNING] [Thread-14 (_process_audio)] Cannot start wake word: already listening=True, porcupine=True
[2025-06-22 17:58:52,135] [INFO] [Thread-14 (_process_audio)] State transition: RobotState.PROCESSING -> RobotState.STANDBY
[2025-06-22 17:58:52,135] [INFO] [Thread-14 (_process_audio)] [DEBUG] Called stop_listening()
[2025-06-22 17:58:52,135] [INFO] [Thread-14 (_process_audio)] State transition: RobotState.STANDBY -> RobotState.SPEAKING
[2025-06-22 17:58:52,135] [INFO] [Thread-14 (_process_audio)] [DEBUG] Called _set_state(SPEAKING)
[2025-06-22 17:58:52,135] [DEBUG] [Thread-14 (_process_audio)] [SpeechController] About to call self.voice.say with: Don't worry, I'll keep going!
[2025-06-22 17:58:52,137] [DEBUG] [Thread-14 (_process_audio)] [VoiceModule] say() called with: Don't worry, I'll keep going! (blocking=False)
[2025-06-22 17:58:52,137] [DEBUG] [Thread-14 (_process_audio)] [VoiceModule] State: is_alive=True, engine=<pyttsx3.engine.Engine object at 0x0000014365D5BA10>
[2025-06-22 17:58:52,137] [DEBUG] [Thread-14 (_process_audio)] [VoiceModule] Queued speech: 'Don't worry, I'll keep going!' (blocking=False)
[2025-06-22 17:58:52,138] [DEBUG] [Thread-14 (_process_audio)] [SpeechController] self.voice.say call complete
[2025-06-22 17:58:52,138] [INFO] [Thread-3] [VoiceModule] Called engine.say() for: 'Don't worry, I'll keep going!'
[2025-06-22 17:58:52,138] [DEBUG] [Thread-14 (_process_audio)] [Thread-14 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:58:55,440] [DEBUG] [Thread-3] [VoiceModule] _on_completed called: name=None, completed=True
[2025-06-22 17:58:55,441] [INFO] [Thread-3] Speech completed: None
[2025-06-22 17:58:55,441] [DEBUG] [Thread-3] [VoiceModule] Notifying completion callbacks
[2025-06-22 17:58:55,441] [DEBUG] [Thread-3] [VoiceModule] Calling completion callback: <bound method SpeechController.on_speech_complete of <controller.speech.SpeechController object at 0x0000014365E0C110>>
[2025-06-22 17:58:55,441] [INFO] [Thread-3] [on_speech_complete] Speech finished. Transitioning to LISTENING and starting speech-to-text.
[2025-06-22 17:58:55,441] [INFO] [Thread-3] State transition: RobotState.SPEAKING -> RobotState.LISTENING
[2025-06-22 17:58:55,441] [INFO] [Thread-3] [SpeechToTextModule] start_listening called
[2025-06-22 17:58:55,443] [INFO] [Thread-3] Using audio input device:
[2025-06-22 17:58:55,443] [DEBUG] [Thread-15 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 0)
[2025-06-22 17:58:55,443] [INFO] [Thread-3]   Name: Microphone Array (Realtek(R) Au
[2025-06-22 17:58:55,443] [WARNING] [Thread-15 (_process_audio)] [Thread-15 (_process_audio)] No audio buffer to process.
[2025-06-22 17:58:55,443] [INFO] [Thread-3]   Index: 1
[2025-06-22 17:58:55,443] [DEBUG] [Thread-15 (_process_audio)] [Thread-15 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:58:55,445] [INFO] [Thread-3]   Sample Rate: 44100 Hz
[2025-06-22 17:58:55,445] [INFO] [Thread-3]   Max Input Channels: 2
[2025-06-22 17:58:55,445] [INFO] [Thread-3] 
[2025-06-22 17:58:55,445] [INFO] [Thread-3] [SpeechToTextModule] Detected device sample rate: 44100
[2025-06-22 17:58:55,446] [INFO] [Thread-3] [SpeechToTextModule] Creating audio stream with sample_rate=44100, chunk_size=2048
[2025-06-22 17:58:55,483] [INFO] [Thread-3] [AudioModule] Created stream id=44100_1_8_2048_True_False type=input device=None rate=44100, channels=1, format=8, chunk_size=2048
[2025-06-22 17:58:55,483] [INFO] [Thread-3] Starting speech recognition
[2025-06-22 17:58:55,483] [INFO] [Thread-3] [SpeechToTextModule] Audio stream started (id=44100_1_8_2048_True_False)
[2025-06-22 17:58:55,483] [DEBUG] [Thread-3] [VoiceModule] All completion callbacks notified
[2025-06-22 17:58:55,485] [DEBUG] [Thread-3] [VoiceModule] _notify_completion called from _on_completed
[2025-06-22 17:58:55,535] [INFO] [Thread-3] [VoiceModule] Finished engine.runAndWait() for: 'Don't worry, I'll keep going!'
[2025-06-22 17:58:57,206] [INFO] [Dummy-16] [SpeechToTextModule] Speech detected, starting buffer with pre-buffer (7 chunks)
[2025-06-22 17:58:58,730] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:58:58,730] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 10
[2025-06-22 17:58:58,730] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:58:58,730] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:58:58,730] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:58:58,730] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:58:58,730] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:58:58,730] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:59:01,385] [INFO] [Dummy-16] [SpeechToTextModule] Silence detected for 1.02s, processing phrase.
[2025-06-22 17:59:01,385] [DEBUG] [Dummy-16] [SpeechToTextModule] Starting _process_audio thread (buffer size: 98)
[2025-06-22 17:59:01,388] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 98)
[2025-06-22 17:59:01,388] [DEBUG] [Thread-17 (_process_audio)] [Thread-17 (_process_audio)] Audio buffer stats: len=200704, duration=4.551s, dtype=float32, min=-0.2492, max=0.3169, mean=0.0000
[2025-06-22 17:59:01,401] [INFO] [Thread-17 (_process_audio)] [SpeechToTextModule] Resampled audio from 44100 Hz to 16000 Hz (len 200704 -> 72817)
[2025-06-22 17:59:01,406] [DEBUG] [Thread-17 (_process_audio)] [DEBUG] Saved audio buffer to debug_transcription_input.wav
[2025-06-22 17:59:01,407] [DEBUG] [Thread-17 (_process_audio)] [Thread-17 (_process_audio)] Processing 72817 samples.
[2025-06-22 17:59:01,407] [INFO] [Thread-17 (_process_audio)] [Thread-17 (_process_audio)] Transcribing audio... (buffer len: 0)
[2025-06-22 17:59:02,766] [INFO] [Thread-17 (_process_audio)] [Thread-17 (_process_audio)] Whisper transcription result: ' Okay, keep going then. I know. So...'
[2025-06-22 17:59:02,766] [DEBUG] [Thread-17 (_process_audio)] [Thread-17 (_process_audio)] Transcription callbacks: [<bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>]
[2025-06-22 17:59:02,768] [DEBUG] [Thread-17 (_process_audio)] [Thread-17 (_process_audio)] Invoking transcription callback with text: ' Okay, keep going then. I know. So...' (callback: <bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>)
[2025-06-22 17:59:02,768] [INFO] [Thread-17 (_process_audio)] Transcribed:  Okay, keep going then. I know. So...
[2025-06-22 17:59:02,768] [INFO] [Thread-17 (_process_audio)] State transition: RobotState.LISTENING -> RobotState.PROCESSING
[2025-06-22 17:59:02,781] [DEBUG] [Thread-17 (_process_audio)] Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are Robbie the Robot, a robot who is being built by Heidi and Heidi's daddy. Your responses should be mostly short, kind, off-kilter, and suitable for a 6 year old. No sound effects."}, {'role': 'user', 'content': ' You have to do this.'}, {'role': 'assistant', 'content': 'Why not give it a try?'}, {'role': 'user', 'content': ' Give what to try.'}, {'role': 'assistant', 'content': "Let's solve the mystery together!"}, {'role': 'user', 'content': " Ah What miss? Don't let it stop. Don't worry."}, {'role': 'assistant', 'content': "Don't worry, I'll keep going!"}, {'role': 'user', 'content': ' Okay, keep going then. I know. So...'}], 'model': 'gpt-3.5-turbo', 'temperature': 0.7}}
[2025-06-22 17:59:02,785] [DEBUG] [Thread-17 (_process_audio)] Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
[2025-06-22 17:59:02,785] [DEBUG] [Thread-17 (_process_audio)] close.started
[2025-06-22 17:59:02,787] [DEBUG] [Thread-17 (_process_audio)] close.complete
[2025-06-22 17:59:02,787] [DEBUG] [Thread-17 (_process_audio)] connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
[2025-06-22 17:59:02,808] [DEBUG] [Thread-17 (_process_audio)] connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FB1EE50>
[2025-06-22 17:59:02,808] [DEBUG] [Thread-17 (_process_audio)] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000143671FA600> server_hostname='api.openai.com' timeout=5.0
[2025-06-22 17:59:02,822] [DEBUG] [Thread-17 (_process_audio)] start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FB2DD50>
[2025-06-22 17:59:02,822] [DEBUG] [Thread-17 (_process_audio)] send_request_headers.started request=<Request [b'POST']>
[2025-06-22 17:59:02,825] [DEBUG] [Thread-17 (_process_audio)] send_request_headers.complete
[2025-06-22 17:59:02,825] [DEBUG] [Thread-17 (_process_audio)] send_request_body.started request=<Request [b'POST']>
[2025-06-22 17:59:02,826] [DEBUG] [Thread-17 (_process_audio)] send_request_body.complete
[2025-06-22 17:59:02,826] [DEBUG] [Thread-17 (_process_audio)] receive_response_headers.started request=<Request [b'POST']>
[2025-06-22 17:59:03,499] [DEBUG] [Thread-17 (_process_audio)] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 22 Jun 2025 16:59:02 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-ymc93dgeojv8fh6cqrik8kuj'), (b'openai-processing-ms', b'326'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'346'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199892'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'32ms'), (b'x-request-id', b'req_7181d2fc7ea41140579fb181e964e73a'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'953d4b35db5cb3b4-MAN'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
[2025-06-22 17:59:03,500] [INFO] [Thread-17 (_process_audio)] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-06-22 17:59:03,500] [DEBUG] [Thread-17 (_process_audio)] receive_response_body.started request=<Request [b'POST']>
[2025-06-22 17:59:03,501] [DEBUG] [Thread-17 (_process_audio)] receive_response_body.complete
[2025-06-22 17:59:03,503] [DEBUG] [Thread-17 (_process_audio)] response_closed.started
[2025-06-22 17:59:03,503] [DEBUG] [Thread-17 (_process_audio)] response_closed.complete
[2025-06-22 17:59:03,505] [DEBUG] [Thread-17 (_process_audio)] HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Sun, 22 Jun 2025 16:59:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-ymc93dgeojv8fh6cqrik8kuj', 'openai-processing-ms': '326', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '346', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '200000', 'x-ratelimit-remaining-requests': '9999', 'x-ratelimit-remaining-tokens': '199892', 'x-ratelimit-reset-requests': '8.64s', 'x-ratelimit-reset-tokens': '32ms', 'x-request-id': 'req_7181d2fc7ea41140579fb181e964e73a', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '953d4b35db5cb3b4-MAN', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
[2025-06-22 17:59:03,505] [DEBUG] [Thread-17 (_process_audio)] request_id: req_7181d2fc7ea41140579fb181e964e73a
[2025-06-22 17:59:03,507] [INFO] [Thread-17 (_process_audio)] Robbie: Let's keep on going and see where we end up!
[2025-06-22 17:59:03,507] [INFO] [Thread-17 (_process_audio)] [DEBUG] Type of response: <class 'str'> Value: "Let's keep on going and see where we end up!"
[2025-06-22 17:59:03,507] [DEBUG] [Thread-17 (_process_audio)] [DEBUG] About to attempt stop_listening and state change
[2025-06-22 17:59:03,507] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:59:03,508] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:59:03,508] [INFO] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening called
[2025-06-22 17:59:03,509] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening: stream_id=44100_1_8_2048_True_False
[2025-06-22 17:59:03,509] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening: about to get stream_info
[2025-06-22 17:59:03,509] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening: got stream_info={'type': 'input', 'device_index': None}
[2025-06-22 17:59:03,510] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening: about to close_stream
[2025-06-22 17:59:05,531] [INFO] [Thread-17 (_process_audio)] [AudioModule] Closed stream (id=44100_1_8_2048_True_False) type=input device=None
[2025-06-22 17:59:05,531] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening: closed stream
[2025-06-22 17:59:05,531] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening: set _stream_id to None
[2025-06-22 17:59:05,531] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (success)
[2025-06-22 17:59:05,531] [INFO] [Thread-17 (_process_audio)] [on_silence_timeout] Silence timeout occurred. Returning to STANDBY.
[2025-06-22 17:59:05,533] [INFO] [Thread-17 (_process_audio)] Returning to standby mode
[2025-06-22 17:59:05,533] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:59:05,533] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:59:05,533] [WARNING] [Thread-17 (_process_audio)] [SpeechToTextModule] Not listening!
[2025-06-22 17:59:05,533] [DEBUG] [Thread-17 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (was not listening)
[2025-06-22 17:59:05,533] [WARNING] [Thread-17 (_process_audio)] Cannot start wake word: already listening=True, porcupine=True
[2025-06-22 17:59:05,533] [INFO] [Thread-17 (_process_audio)] State transition: RobotState.PROCESSING -> RobotState.STANDBY
[2025-06-22 17:59:05,533] [INFO] [Thread-17 (_process_audio)] [DEBUG] Called stop_listening()
[2025-06-22 17:59:05,533] [INFO] [Thread-17 (_process_audio)] State transition: RobotState.STANDBY -> RobotState.SPEAKING
[2025-06-22 17:59:05,535] [INFO] [Thread-17 (_process_audio)] [DEBUG] Called _set_state(SPEAKING)
[2025-06-22 17:59:05,535] [DEBUG] [Thread-17 (_process_audio)] [SpeechController] About to call self.voice.say with: Let's keep on going and see where we end up!
[2025-06-22 17:59:05,535] [DEBUG] [Thread-17 (_process_audio)] [VoiceModule] say() called with: Let's keep on going and see where we end up! (blocking=False)
[2025-06-22 17:59:05,535] [DEBUG] [Thread-17 (_process_audio)] [VoiceModule] State: is_alive=True, engine=<pyttsx3.engine.Engine object at 0x0000014365D5BA10>
[2025-06-22 17:59:05,535] [DEBUG] [Thread-17 (_process_audio)] [VoiceModule] Queued speech: 'Let's keep on going and see where we end up!' (blocking=False)
[2025-06-22 17:59:05,535] [DEBUG] [Thread-17 (_process_audio)] [SpeechController] self.voice.say call complete
[2025-06-22 17:59:05,535] [INFO] [Thread-3] [VoiceModule] Called engine.say() for: 'Let's keep on going and see where we end up!'
[2025-06-22 17:59:05,535] [DEBUG] [Thread-17 (_process_audio)] [Thread-17 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:59:08,732] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:59:08,732] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 10
[2025-06-22 17:59:08,733] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:59:08,733] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:59:08,734] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:59:08,734] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:59:08,734] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:59:08,734] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:59:09,335] [DEBUG] [Thread-3] [VoiceModule] _on_completed called: name=None, completed=True
[2025-06-22 17:59:09,335] [INFO] [Thread-3] Speech completed: None
[2025-06-22 17:59:09,336] [DEBUG] [Thread-3] [VoiceModule] Notifying completion callbacks
[2025-06-22 17:59:09,336] [DEBUG] [Thread-3] [VoiceModule] Calling completion callback: <bound method SpeechController.on_speech_complete of <controller.speech.SpeechController object at 0x0000014365E0C110>>
[2025-06-22 17:59:09,336] [INFO] [Thread-3] [on_speech_complete] Speech finished. Transitioning to LISTENING and starting speech-to-text.
[2025-06-22 17:59:09,336] [INFO] [Thread-3] State transition: RobotState.SPEAKING -> RobotState.LISTENING
[2025-06-22 17:59:09,336] [INFO] [Thread-3] [SpeechToTextModule] start_listening called
[2025-06-22 17:59:09,336] [INFO] [Thread-3] Using audio input device:
[2025-06-22 17:59:09,336] [DEBUG] [Thread-18 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 0)
[2025-06-22 17:59:09,339] [INFO] [Thread-3]   Name: Microphone Array (Realtek(R) Au
[2025-06-22 17:59:09,339] [WARNING] [Thread-18 (_process_audio)] [Thread-18 (_process_audio)] No audio buffer to process.
[2025-06-22 17:59:09,339] [INFO] [Thread-3]   Index: 1
[2025-06-22 17:59:09,339] [DEBUG] [Thread-18 (_process_audio)] [Thread-18 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:59:09,339] [INFO] [Thread-3]   Sample Rate: 44100 Hz
[2025-06-22 17:59:09,339] [INFO] [Thread-3]   Max Input Channels: 2
[2025-06-22 17:59:09,339] [INFO] [Thread-3] 
[2025-06-22 17:59:09,341] [INFO] [Thread-3] [SpeechToTextModule] Detected device sample rate: 44100
[2025-06-22 17:59:09,341] [INFO] [Thread-3] [SpeechToTextModule] Creating audio stream with sample_rate=44100, chunk_size=2048
[2025-06-22 17:59:09,357] [INFO] [Thread-3] [AudioModule] Created stream id=44100_1_8_2048_True_False type=input device=None rate=44100, channels=1, format=8, chunk_size=2048
[2025-06-22 17:59:09,357] [INFO] [Thread-3] Starting speech recognition
[2025-06-22 17:59:09,358] [INFO] [Thread-3] [SpeechToTextModule] Audio stream started (id=44100_1_8_2048_True_False)
[2025-06-22 17:59:09,358] [DEBUG] [Thread-3] [VoiceModule] All completion callbacks notified
[2025-06-22 17:59:09,358] [DEBUG] [Thread-3] [VoiceModule] _notify_completion called from _on_completed
[2025-06-22 17:59:09,403] [INFO] [Dummy-19] [SpeechToTextModule] Speech detected, starting buffer with pre-buffer (7 chunks)
[2025-06-22 17:59:09,409] [INFO] [Thread-3] [VoiceModule] Finished engine.runAndWait() for: 'Let's keep on going and see where we end up!'
[2025-06-22 17:59:11,722] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.02s, processing phrase.
[2025-06-22 17:59:11,724] [DEBUG] [Dummy-19] [SpeechToTextModule] Starting _process_audio thread (buffer size: 58)
[2025-06-22 17:59:11,725] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 58)
[2025-06-22 17:59:11,725] [DEBUG] [Thread-20 (_process_audio)] [Thread-20 (_process_audio)] Audio buffer stats: len=118784, duration=2.694s, dtype=float32, min=-0.0962, max=0.0923, mean=0.0000
[2025-06-22 17:59:11,740] [INFO] [Thread-20 (_process_audio)] [SpeechToTextModule] Resampled audio from 44100 Hz to 16000 Hz (len 118784 -> 43096)
[2025-06-22 17:59:11,747] [DEBUG] [Thread-20 (_process_audio)] [DEBUG] Saved audio buffer to debug_transcription_input.wav
[2025-06-22 17:59:11,749] [DEBUG] [Thread-20 (_process_audio)] [Thread-20 (_process_audio)] Processing 43096 samples.
[2025-06-22 17:59:11,751] [INFO] [Thread-20 (_process_audio)] [Thread-20 (_process_audio)] Transcribing audio... (buffer len: 0)
[2025-06-22 17:59:11,866] [INFO] [Dummy-19] [SpeechToTextModule] Speech detected, starting buffer with pre-buffer (3 chunks)
[2025-06-22 17:59:13,027] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.02s, processing phrase.
[2025-06-22 17:59:13,078] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.07s, processing phrase.
[2025-06-22 17:59:13,126] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.12s, processing phrase.
[2025-06-22 17:59:13,164] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.16s, processing phrase.
[2025-06-22 17:59:13,213] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.21s, processing phrase.
[2025-06-22 17:59:13,267] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.26s, processing phrase.
[2025-06-22 17:59:13,308] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.30s, processing phrase.
[2025-06-22 17:59:13,353] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.35s, processing phrase.
[2025-06-22 17:59:13,404] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.40s, processing phrase.
[2025-06-22 17:59:13,447] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.44s, processing phrase.
[2025-06-22 17:59:13,497] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.49s, processing phrase.
[2025-06-22 17:59:13,547] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.54s, processing phrase.
[2025-06-22 17:59:13,587] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.58s, processing phrase.
[2025-06-22 17:59:13,636] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.63s, processing phrase.
[2025-06-22 17:59:13,674] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.66s, processing phrase.
[2025-06-22 17:59:13,724] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.71s, processing phrase.
[2025-06-22 17:59:13,772] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.76s, processing phrase.
[2025-06-22 17:59:13,817] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.81s, processing phrase.
[2025-06-22 17:59:13,867] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.86s, processing phrase.
[2025-06-22 17:59:13,914] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.91s, processing phrase.
[2025-06-22 17:59:13,956] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 1.95s, processing phrase.
[2025-06-22 17:59:14,006] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.00s, processing phrase.
[2025-06-22 17:59:14,056] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.05s, processing phrase.
[2025-06-22 17:59:14,094] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.09s, processing phrase.
[2025-06-22 17:59:14,147] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.14s, processing phrase.
[2025-06-22 17:59:14,197] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.19s, processing phrase.
[2025-06-22 17:59:14,234] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.23s, processing phrase.
[2025-06-22 17:59:14,284] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.28s, processing phrase.
[2025-06-22 17:59:14,326] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.32s, processing phrase.
[2025-06-22 17:59:14,376] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.37s, processing phrase.
[2025-06-22 17:59:14,428] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.42s, processing phrase.
[2025-06-22 17:59:14,466] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.46s, processing phrase.
[2025-06-22 17:59:14,516] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.51s, processing phrase.
[2025-06-22 17:59:14,567] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.56s, processing phrase.
[2025-06-22 17:59:14,602] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.60s, processing phrase.
[2025-06-22 17:59:14,649] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.64s, processing phrase.
[2025-06-22 17:59:14,708] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.70s, processing phrase.
[2025-06-22 17:59:14,747] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.74s, processing phrase.
[2025-06-22 17:59:14,792] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.79s, processing phrase.
[2025-06-22 17:59:14,844] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.84s, processing phrase.
[2025-06-22 17:59:14,886] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.88s, processing phrase.
[2025-06-22 17:59:14,936] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.93s, processing phrase.
[2025-06-22 17:59:14,974] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 2.96s, processing phrase.
[2025-06-22 17:59:15,027] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 3.02s, processing phrase.
[2025-06-22 17:59:15,076] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 3.07s, processing phrase.
[2025-06-22 17:59:15,110] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 3.10s, processing phrase.
[2025-06-22 17:59:15,160] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 3.15s, processing phrase.
[2025-06-22 17:59:15,214] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 3.21s, processing phrase.
[2025-06-22 17:59:15,257] [INFO] [Dummy-19] [SpeechToTextModule] Silence detected for 3.25s, processing phrase.
[2025-06-22 17:59:15,307] [INFO] [Dummy-19] [SpeechToTextModule] Speech detected, starting buffer with pre-buffer (1 chunks)
[2025-06-22 17:59:17,266] [INFO] [Thread-20 (_process_audio)] [Thread-20 (_process_audio)] Whisper transcription result: ' Vatican Heroes'
[2025-06-22 17:59:17,266] [DEBUG] [Thread-20 (_process_audio)] [Thread-20 (_process_audio)] Transcription callbacks: [<bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>]
[2025-06-22 17:59:17,266] [DEBUG] [Thread-20 (_process_audio)] [Thread-20 (_process_audio)] Invoking transcription callback with text: ' Vatican Heroes' (callback: <bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>)
[2025-06-22 17:59:17,266] [INFO] [Thread-20 (_process_audio)] Transcribed:  Vatican Heroes
[2025-06-22 17:59:17,266] [INFO] [Thread-20 (_process_audio)] State transition: RobotState.LISTENING -> RobotState.PROCESSING
[2025-06-22 17:59:17,279] [DEBUG] [Thread-20 (_process_audio)] Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are Robbie the Robot, a robot who is being built by Heidi and Heidi's daddy. Your responses should be mostly short, kind, off-kilter, and suitable for a 6 year old. No sound effects."}, {'role': 'user', 'content': ' You have to do this.'}, {'role': 'assistant', 'content': 'Why not give it a try?'}, {'role': 'user', 'content': ' Give what to try.'}, {'role': 'assistant', 'content': "Let's solve the mystery together!"}, {'role': 'user', 'content': " Ah What miss? Don't let it stop. Don't worry."}, {'role': 'assistant', 'content': "Don't worry, I'll keep going!"}, {'role': 'user', 'content': ' Okay, keep going then. I know. So...'}, {'role': 'assistant', 'content': "Let's keep on going and see where we end up!"}, {'role': 'user', 'content': ' Vatican Heroes'}], 'model': 'gpt-3.5-turbo', 'temperature': 0.7}}
[2025-06-22 17:59:17,279] [DEBUG] [Thread-20 (_process_audio)] Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
[2025-06-22 17:59:17,281] [DEBUG] [Thread-20 (_process_audio)] close.started
[2025-06-22 17:59:17,311] [DEBUG] [Thread-20 (_process_audio)] close.complete
[2025-06-22 17:59:17,313] [DEBUG] [Thread-20 (_process_audio)] connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
[2025-06-22 17:59:17,325] [DEBUG] [Thread-20 (_process_audio)] connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FAF6E50>
[2025-06-22 17:59:17,326] [DEBUG] [Thread-20 (_process_audio)] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000143671FA600> server_hostname='api.openai.com' timeout=5.0
[2025-06-22 17:59:17,335] [DEBUG] [Thread-20 (_process_audio)] start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FB37350>
[2025-06-22 17:59:17,335] [DEBUG] [Thread-20 (_process_audio)] send_request_headers.started request=<Request [b'POST']>
[2025-06-22 17:59:17,335] [DEBUG] [Thread-20 (_process_audio)] send_request_headers.complete
[2025-06-22 17:59:17,337] [DEBUG] [Thread-20 (_process_audio)] send_request_body.started request=<Request [b'POST']>
[2025-06-22 17:59:17,337] [DEBUG] [Thread-20 (_process_audio)] send_request_body.complete
[2025-06-22 17:59:17,337] [DEBUG] [Thread-20 (_process_audio)] receive_response_headers.started request=<Request [b'POST']>
[2025-06-22 17:59:17,738] [DEBUG] [Thread-20 (_process_audio)] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 22 Jun 2025 16:59:16 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-ymc93dgeojv8fh6cqrik8kuj'), (b'openai-processing-ms', b'257'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'264'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199876'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'37ms'), (b'x-request-id', b'req_6bbcb5e67d971f8be35d8c1264385e72'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'953d4b908918a122-MAN'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
[2025-06-22 17:59:17,741] [INFO] [Thread-20 (_process_audio)] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-06-22 17:59:17,741] [DEBUG] [Thread-20 (_process_audio)] receive_response_body.started request=<Request [b'POST']>
[2025-06-22 17:59:17,743] [DEBUG] [Thread-20 (_process_audio)] receive_response_body.complete
[2025-06-22 17:59:17,743] [DEBUG] [Thread-20 (_process_audio)] response_closed.started
[2025-06-22 17:59:17,743] [DEBUG] [Thread-20 (_process_audio)] response_closed.complete
[2025-06-22 17:59:17,743] [DEBUG] [Thread-20 (_process_audio)] HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Sun, 22 Jun 2025 16:59:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-ymc93dgeojv8fh6cqrik8kuj', 'openai-processing-ms': '257', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '264', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '200000', 'x-ratelimit-remaining-requests': '9999', 'x-ratelimit-remaining-tokens': '199876', 'x-ratelimit-reset-requests': '8.64s', 'x-ratelimit-reset-tokens': '37ms', 'x-request-id': 'req_6bbcb5e67d971f8be35d8c1264385e72', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '953d4b908918a122-MAN', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
[2025-06-22 17:59:17,743] [DEBUG] [Thread-20 (_process_audio)] request_id: req_6bbcb5e67d971f8be35d8c1264385e72
[2025-06-22 17:59:17,745] [INFO] [Thread-20 (_process_audio)] Robbie: Vatican Heroes? Sounds like a cool adventure game!
[2025-06-22 17:59:17,745] [INFO] [Thread-20 (_process_audio)] [DEBUG] Type of response: <class 'str'> Value: 'Vatican Heroes? Sounds like a cool adventure game!'
[2025-06-22 17:59:17,745] [DEBUG] [Thread-20 (_process_audio)] [DEBUG] About to attempt stop_listening and state change
[2025-06-22 17:59:17,745] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:59:17,745] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:59:17,745] [INFO] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening called
[2025-06-22 17:59:17,746] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening: stream_id=44100_1_8_2048_True_False
[2025-06-22 17:59:17,746] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening: about to get stream_info
[2025-06-22 17:59:17,746] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening: got stream_info={'type': 'input', 'device_index': None}
[2025-06-22 17:59:17,746] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening: about to close_stream
[2025-06-22 17:59:18,736] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:59:18,736] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 12
[2025-06-22 17:59:18,736] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:59:18,736] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:59:18,736] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:59:18,736] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:59:18,736] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:59:18,736] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:59:19,756] [INFO] [Thread-20 (_process_audio)] [AudioModule] Closed stream (id=44100_1_8_2048_True_False) type=input device=None
[2025-06-22 17:59:19,756] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening: closed stream
[2025-06-22 17:59:19,756] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening: set _stream_id to None
[2025-06-22 17:59:19,756] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (success)
[2025-06-22 17:59:19,756] [INFO] [Thread-20 (_process_audio)] Processing remaining audio before stopping
[2025-06-22 17:59:19,756] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 44)
[2025-06-22 17:59:19,756] [WARNING] [Thread-20 (_process_audio)] [_process_audio] Called while not listening, skipping.
[2025-06-22 17:59:19,758] [INFO] [Thread-20 (_process_audio)] [on_silence_timeout] Silence timeout occurred. Returning to STANDBY.
[2025-06-22 17:59:19,758] [INFO] [Thread-20 (_process_audio)] Returning to standby mode
[2025-06-22 17:59:19,758] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:59:19,758] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:59:19,758] [WARNING] [Thread-20 (_process_audio)] [SpeechToTextModule] Not listening!
[2025-06-22 17:59:19,758] [DEBUG] [Thread-20 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (was not listening)
[2025-06-22 17:59:19,758] [WARNING] [Thread-20 (_process_audio)] Cannot start wake word: already listening=True, porcupine=True
[2025-06-22 17:59:19,758] [INFO] [Thread-20 (_process_audio)] State transition: RobotState.PROCESSING -> RobotState.STANDBY
[2025-06-22 17:59:19,758] [INFO] [Thread-20 (_process_audio)] [DEBUG] Called stop_listening()
[2025-06-22 17:59:19,760] [INFO] [Thread-20 (_process_audio)] State transition: RobotState.STANDBY -> RobotState.SPEAKING
[2025-06-22 17:59:19,760] [INFO] [Thread-20 (_process_audio)] [DEBUG] Called _set_state(SPEAKING)
[2025-06-22 17:59:19,760] [DEBUG] [Thread-20 (_process_audio)] [SpeechController] About to call self.voice.say with: Vatican Heroes? Sounds like a cool adventure game!
[2025-06-22 17:59:19,760] [DEBUG] [Thread-20 (_process_audio)] [VoiceModule] say() called with: Vatican Heroes? Sounds like a cool adventure game! (blocking=False)
[2025-06-22 17:59:19,760] [DEBUG] [Thread-20 (_process_audio)] [VoiceModule] State: is_alive=True, engine=<pyttsx3.engine.Engine object at 0x0000014365D5BA10>
[2025-06-22 17:59:19,760] [DEBUG] [Thread-20 (_process_audio)] [VoiceModule] Queued speech: 'Vatican Heroes? Sounds like a cool adventure game!' (blocking=False)
[2025-06-22 17:59:19,762] [DEBUG] [Thread-20 (_process_audio)] [SpeechController] self.voice.say call complete
[2025-06-22 17:59:19,762] [INFO] [Thread-3] [VoiceModule] Called engine.say() for: 'Vatican Heroes? Sounds like a cool adventure game!'
[2025-06-22 17:59:19,762] [DEBUG] [Thread-20 (_process_audio)] [Thread-20 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:59:25,175] [DEBUG] [Thread-3] [VoiceModule] _on_completed called: name=None, completed=True
[2025-06-22 17:59:25,175] [INFO] [Thread-3] Speech completed: None
[2025-06-22 17:59:25,176] [DEBUG] [Thread-3] [VoiceModule] Notifying completion callbacks
[2025-06-22 17:59:25,176] [DEBUG] [Thread-3] [VoiceModule] Calling completion callback: <bound method SpeechController.on_speech_complete of <controller.speech.SpeechController object at 0x0000014365E0C110>>
[2025-06-22 17:59:25,176] [INFO] [Thread-3] [on_speech_complete] Speech finished. Transitioning to LISTENING and starting speech-to-text.
[2025-06-22 17:59:25,176] [INFO] [Thread-3] State transition: RobotState.SPEAKING -> RobotState.LISTENING
[2025-06-22 17:59:25,177] [INFO] [Thread-3] [SpeechToTextModule] start_listening called
[2025-06-22 17:59:25,178] [INFO] [Thread-3] Using audio input device:
[2025-06-22 17:59:25,179] [DEBUG] [Thread-21 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 0)
[2025-06-22 17:59:25,179] [INFO] [Thread-3]   Name: Microphone Array (Realtek(R) Au
[2025-06-22 17:59:25,179] [WARNING] [Thread-21 (_process_audio)] [Thread-21 (_process_audio)] No audio buffer to process.
[2025-06-22 17:59:25,179] [INFO] [Thread-3]   Index: 1
[2025-06-22 17:59:25,179] [DEBUG] [Thread-21 (_process_audio)] [Thread-21 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:59:25,179] [INFO] [Thread-3]   Sample Rate: 44100 Hz
[2025-06-22 17:59:25,179] [INFO] [Thread-3]   Max Input Channels: 2
[2025-06-22 17:59:25,179] [INFO] [Thread-3] 
[2025-06-22 17:59:25,179] [INFO] [Thread-3] [SpeechToTextModule] Detected device sample rate: 44100
[2025-06-22 17:59:25,181] [INFO] [Thread-3] [SpeechToTextModule] Creating audio stream with sample_rate=44100, chunk_size=2048
[2025-06-22 17:59:25,213] [INFO] [Thread-3] [AudioModule] Created stream id=44100_1_8_2048_True_False type=input device=None rate=44100, channels=1, format=8, chunk_size=2048
[2025-06-22 17:59:25,214] [INFO] [Thread-3] Starting speech recognition
[2025-06-22 17:59:25,214] [INFO] [Thread-3] [SpeechToTextModule] Audio stream started (id=44100_1_8_2048_True_False)
[2025-06-22 17:59:25,214] [DEBUG] [Thread-3] [VoiceModule] All completion callbacks notified
[2025-06-22 17:59:25,215] [DEBUG] [Thread-3] [VoiceModule] _notify_completion called from _on_completed
[2025-06-22 17:59:25,266] [INFO] [Thread-3] [VoiceModule] Finished engine.runAndWait() for: 'Vatican Heroes? Sounds like a cool adventure game!'
[2025-06-22 17:59:26,197] [INFO] [Dummy-22] [SpeechToTextModule] Silence detected for 1.02s, but buffer is silent. Clearing buffer. (max_amplitude=0.00003, threshold=0.00316, dB=-50)
[2025-06-22 17:59:27,268] [INFO] [Dummy-22] [SpeechToTextModule] Speech detected, starting buffer with pre-buffer (7 chunks)
[2025-06-22 17:59:28,740] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:59:28,740] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 12
[2025-06-22 17:59:28,740] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:59:28,741] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:59:28,741] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:59:28,741] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:59:28,741] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:59:28,741] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:59:30,938] [INFO] [Dummy-22] [SpeechToTextModule] Silence detected for 1.03s, processing phrase.
[2025-06-22 17:59:30,938] [DEBUG] [Dummy-22] [SpeechToTextModule] Starting _process_audio thread (buffer size: 87)
[2025-06-22 17:59:30,939] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 87)
[2025-06-22 17:59:30,939] [DEBUG] [Thread-23 (_process_audio)] [Thread-23 (_process_audio)] Audio buffer stats: len=178176, duration=4.040s, dtype=float32, min=-0.4636, max=0.4203, mean=-0.0000
[2025-06-22 17:59:30,954] [INFO] [Thread-23 (_process_audio)] [SpeechToTextModule] Resampled audio from 44100 Hz to 16000 Hz (len 178176 -> 64644)
[2025-06-22 17:59:30,955] [DEBUG] [Thread-23 (_process_audio)] [DEBUG] Saved audio buffer to debug_transcription_input.wav
[2025-06-22 17:59:30,956] [DEBUG] [Thread-23 (_process_audio)] [Thread-23 (_process_audio)] Processing 64644 samples.
[2025-06-22 17:59:30,956] [INFO] [Thread-23 (_process_audio)] [Thread-23 (_process_audio)] Transcribing audio... (buffer len: 0)
[2025-06-22 17:59:32,056] [INFO] [Thread-23 (_process_audio)] [Thread-23 (_process_audio)] Whisper transcription result: ' No one said Vatican hero is Robbie.'
[2025-06-22 17:59:32,058] [DEBUG] [Thread-23 (_process_audio)] [Thread-23 (_process_audio)] Transcription callbacks: [<bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>]
[2025-06-22 17:59:32,058] [DEBUG] [Thread-23 (_process_audio)] [Thread-23 (_process_audio)] Invoking transcription callback with text: ' No one said Vatican hero is Robbie.' (callback: <bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>)
[2025-06-22 17:59:32,058] [INFO] [Thread-23 (_process_audio)] Transcribed:  No one said Vatican hero is Robbie.
[2025-06-22 17:59:32,058] [INFO] [Thread-23 (_process_audio)] State transition: RobotState.LISTENING -> RobotState.PROCESSING
[2025-06-22 17:59:32,086] [DEBUG] [Thread-23 (_process_audio)] Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are Robbie the Robot, a robot who is being built by Heidi and Heidi's daddy. Your responses should be mostly short, kind, off-kilter, and suitable for a 6 year old. No sound effects."}, {'role': 'user', 'content': ' Give what to try.'}, {'role': 'assistant', 'content': "Let's solve the mystery together!"}, {'role': 'user', 'content': " Ah What miss? Don't let it stop. Don't worry."}, {'role': 'assistant', 'content': "Don't worry, I'll keep going!"}, {'role': 'user', 'content': ' Okay, keep going then. I know. So...'}, {'role': 'assistant', 'content': "Let's keep on going and see where we end up!"}, {'role': 'user', 'content': ' Vatican Heroes'}, {'role': 'assistant', 'content': 'Vatican Heroes? Sounds like a cool adventure game!'}, {'role': 'user', 'content': ' No one said Vatican hero is Robbie.'}], 'model': 'gpt-3.5-turbo', 'temperature': 0.7}}
[2025-06-22 17:59:32,090] [DEBUG] [Thread-23 (_process_audio)] Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
[2025-06-22 17:59:32,091] [DEBUG] [Thread-23 (_process_audio)] close.started
[2025-06-22 17:59:32,091] [DEBUG] [Thread-23 (_process_audio)] close.complete
[2025-06-22 17:59:32,091] [DEBUG] [Thread-23 (_process_audio)] connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
[2025-06-22 17:59:32,128] [DEBUG] [Thread-23 (_process_audio)] connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FB4A550>
[2025-06-22 17:59:32,128] [DEBUG] [Thread-23 (_process_audio)] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000143671FA600> server_hostname='api.openai.com' timeout=5.0
[2025-06-22 17:59:32,143] [DEBUG] [Thread-23 (_process_audio)] start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FB4A1D0>
[2025-06-22 17:59:32,143] [DEBUG] [Thread-23 (_process_audio)] send_request_headers.started request=<Request [b'POST']>
[2025-06-22 17:59:32,144] [DEBUG] [Thread-23 (_process_audio)] send_request_headers.complete
[2025-06-22 17:59:32,145] [DEBUG] [Thread-23 (_process_audio)] send_request_body.started request=<Request [b'POST']>
[2025-06-22 17:59:32,149] [DEBUG] [Thread-23 (_process_audio)] send_request_body.complete
[2025-06-22 17:59:32,149] [DEBUG] [Thread-23 (_process_audio)] receive_response_headers.started request=<Request [b'POST']>
[2025-06-22 17:59:32,501] [DEBUG] [Thread-23 (_process_audio)] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 22 Jun 2025 16:59:31 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-ymc93dgeojv8fh6cqrik8kuj'), (b'openai-processing-ms', b'205'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'208'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199865'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'40ms'), (b'x-request-id', b'req_08f9fe64feafd9cd2c5c57bba921ac01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'953d4bed1f750742-MAN'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
[2025-06-22 17:59:32,504] [INFO] [Thread-23 (_process_audio)] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-06-22 17:59:32,504] [DEBUG] [Thread-23 (_process_audio)] receive_response_body.started request=<Request [b'POST']>
[2025-06-22 17:59:32,506] [DEBUG] [Thread-23 (_process_audio)] receive_response_body.complete
[2025-06-22 17:59:32,506] [DEBUG] [Thread-23 (_process_audio)] response_closed.started
[2025-06-22 17:59:32,506] [DEBUG] [Thread-23 (_process_audio)] response_closed.complete
[2025-06-22 17:59:32,508] [DEBUG] [Thread-23 (_process_audio)] HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Sun, 22 Jun 2025 16:59:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-ymc93dgeojv8fh6cqrik8kuj', 'openai-processing-ms': '205', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '208', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '200000', 'x-ratelimit-remaining-requests': '9999', 'x-ratelimit-remaining-tokens': '199865', 'x-ratelimit-reset-requests': '8.64s', 'x-ratelimit-reset-tokens': '40ms', 'x-request-id': 'req_08f9fe64feafd9cd2c5c57bba921ac01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '953d4bed1f750742-MAN', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
[2025-06-22 17:59:32,508] [DEBUG] [Thread-23 (_process_audio)] request_id: req_08f9fe64feafd9cd2c5c57bba921ac01
[2025-06-22 17:59:32,508] [INFO] [Thread-23 (_process_audio)] Robbie: That's right! I'm Robbie the Robot, here to help out on all our adventures!
[2025-06-22 17:59:32,508] [INFO] [Thread-23 (_process_audio)] [DEBUG] Type of response: <class 'str'> Value: "That's right! I'm Robbie the Robot, here to help out on all our adventures!"
[2025-06-22 17:59:32,508] [DEBUG] [Thread-23 (_process_audio)] [DEBUG] About to attempt stop_listening and state change
[2025-06-22 17:59:32,511] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:59:32,511] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:59:32,511] [INFO] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening called
[2025-06-22 17:59:32,511] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening: stream_id=44100_1_8_2048_True_False
[2025-06-22 17:59:32,511] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening: about to get stream_info
[2025-06-22 17:59:32,511] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening: got stream_info={'type': 'input', 'device_index': None}
[2025-06-22 17:59:32,511] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening: about to close_stream
[2025-06-22 17:59:34,529] [INFO] [Thread-23 (_process_audio)] [AudioModule] Closed stream (id=44100_1_8_2048_True_False) type=input device=None
[2025-06-22 17:59:34,530] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening: closed stream
[2025-06-22 17:59:34,530] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening: set _stream_id to None
[2025-06-22 17:59:34,530] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (success)
[2025-06-22 17:59:34,530] [INFO] [Thread-23 (_process_audio)] [on_silence_timeout] Silence timeout occurred. Returning to STANDBY.
[2025-06-22 17:59:34,530] [INFO] [Thread-23 (_process_audio)] Returning to standby mode
[2025-06-22 17:59:34,530] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:59:34,530] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:59:34,530] [WARNING] [Thread-23 (_process_audio)] [SpeechToTextModule] Not listening!
[2025-06-22 17:59:34,530] [DEBUG] [Thread-23 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (was not listening)
[2025-06-22 17:59:34,530] [WARNING] [Thread-23 (_process_audio)] Cannot start wake word: already listening=True, porcupine=True
[2025-06-22 17:59:34,533] [INFO] [Thread-23 (_process_audio)] State transition: RobotState.PROCESSING -> RobotState.STANDBY
[2025-06-22 17:59:34,533] [INFO] [Thread-23 (_process_audio)] [DEBUG] Called stop_listening()
[2025-06-22 17:59:34,533] [INFO] [Thread-23 (_process_audio)] State transition: RobotState.STANDBY -> RobotState.SPEAKING
[2025-06-22 17:59:34,533] [INFO] [Thread-23 (_process_audio)] [DEBUG] Called _set_state(SPEAKING)
[2025-06-22 17:59:34,535] [DEBUG] [Thread-23 (_process_audio)] [SpeechController] About to call self.voice.say with: That's right! I'm Robbie the Robot, here to help out on all our adventures!
[2025-06-22 17:59:34,535] [DEBUG] [Thread-23 (_process_audio)] [VoiceModule] say() called with: That's right! I'm Robbie the Robot, here to help out on all our adventures! (blocking=False)
[2025-06-22 17:59:34,535] [DEBUG] [Thread-23 (_process_audio)] [VoiceModule] State: is_alive=True, engine=<pyttsx3.engine.Engine object at 0x0000014365D5BA10>
[2025-06-22 17:59:34,535] [DEBUG] [Thread-23 (_process_audio)] [VoiceModule] Queued speech: 'That's right! I'm Robbie the Robot, here to help out on all our adventures!' (blocking=False)
[2025-06-22 17:59:34,536] [DEBUG] [Thread-23 (_process_audio)] [SpeechController] self.voice.say call complete
[2025-06-22 17:59:34,538] [DEBUG] [Thread-23 (_process_audio)] [Thread-23 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:59:34,536] [INFO] [Thread-3] [VoiceModule] Called engine.say() for: 'That's right! I'm Robbie the Robot, here to help out on all our adventures!'
[2025-06-22 17:59:38,743] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:59:38,743] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 12
[2025-06-22 17:59:38,743] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:59:38,745] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:59:38,745] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:59:38,745] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:59:38,745] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:59:38,745] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:59:41,476] [DEBUG] [Thread-3] [VoiceModule] _on_completed called: name=None, completed=True
[2025-06-22 17:59:41,476] [INFO] [Thread-3] Speech completed: None
[2025-06-22 17:59:41,477] [DEBUG] [Thread-3] [VoiceModule] Notifying completion callbacks
[2025-06-22 17:59:41,477] [DEBUG] [Thread-3] [VoiceModule] Calling completion callback: <bound method SpeechController.on_speech_complete of <controller.speech.SpeechController object at 0x0000014365E0C110>>
[2025-06-22 17:59:41,477] [INFO] [Thread-3] [on_speech_complete] Speech finished. Transitioning to LISTENING and starting speech-to-text.
[2025-06-22 17:59:41,477] [INFO] [Thread-3] State transition: RobotState.SPEAKING -> RobotState.LISTENING
[2025-06-22 17:59:41,478] [INFO] [Thread-3] [SpeechToTextModule] start_listening called
[2025-06-22 17:59:41,479] [INFO] [Thread-3] Using audio input device:
[2025-06-22 17:59:41,479] [DEBUG] [Thread-24 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 0)
[2025-06-22 17:59:41,479] [INFO] [Thread-3]   Name: Microphone Array (Realtek(R) Au
[2025-06-22 17:59:41,479] [WARNING] [Thread-24 (_process_audio)] [Thread-24 (_process_audio)] No audio buffer to process.
[2025-06-22 17:59:41,480] [INFO] [Thread-3]   Index: 1
[2025-06-22 17:59:41,480] [DEBUG] [Thread-24 (_process_audio)] [Thread-24 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:59:41,480] [INFO] [Thread-3]   Sample Rate: 44100 Hz
[2025-06-22 17:59:41,480] [INFO] [Thread-3]   Max Input Channels: 2
[2025-06-22 17:59:41,481] [INFO] [Thread-3] 
[2025-06-22 17:59:41,481] [INFO] [Thread-3] [SpeechToTextModule] Detected device sample rate: 44100
[2025-06-22 17:59:41,481] [INFO] [Thread-3] [SpeechToTextModule] Creating audio stream with sample_rate=44100, chunk_size=2048
[2025-06-22 17:59:41,505] [INFO] [Thread-3] [AudioModule] Created stream id=44100_1_8_2048_True_False type=input device=None rate=44100, channels=1, format=8, chunk_size=2048
[2025-06-22 17:59:41,505] [INFO] [Thread-3] Starting speech recognition
[2025-06-22 17:59:41,506] [INFO] [Thread-3] [SpeechToTextModule] Audio stream started (id=44100_1_8_2048_True_False)
[2025-06-22 17:59:41,506] [DEBUG] [Thread-3] [VoiceModule] All completion callbacks notified
[2025-06-22 17:59:41,506] [DEBUG] [Thread-3] [VoiceModule] _notify_completion called from _on_completed
[2025-06-22 17:59:41,558] [INFO] [Thread-3] [VoiceModule] Finished engine.runAndWait() for: 'That's right! I'm Robbie the Robot, here to help out on all our adventures!'
[2025-06-22 17:59:43,323] [INFO] [Dummy-25] [SpeechToTextModule] Speech detected, starting buffer with pre-buffer (7 chunks)
[2025-06-22 17:59:48,747] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:59:48,747] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 13
[2025-06-22 17:59:48,748] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:59:48,748] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:59:48,748] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:59:48,749] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:59:48,749] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:59:48,749] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:59:48,808] [INFO] [Dummy-25] [SpeechToTextModule] Silence detected for 1.03s, processing phrase.
[2025-06-22 17:59:48,808] [DEBUG] [Dummy-25] [SpeechToTextModule] Starting _process_audio thread (buffer size: 126)
[2025-06-22 17:59:48,810] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 126)
[2025-06-22 17:59:48,810] [DEBUG] [Thread-26 (_process_audio)] [Thread-26 (_process_audio)] Audio buffer stats: len=258048, duration=5.851s, dtype=float32, min=-0.4802, max=0.5035, mean=0.0000
[2025-06-22 17:59:48,827] [INFO] [Thread-26 (_process_audio)] [SpeechToTextModule] Resampled audio from 44100 Hz to 16000 Hz (len 258048 -> 93622)
[2025-06-22 17:59:48,830] [DEBUG] [Thread-26 (_process_audio)] [DEBUG] Saved audio buffer to debug_transcription_input.wav
[2025-06-22 17:59:48,830] [DEBUG] [Thread-26 (_process_audio)] [Thread-26 (_process_audio)] Processing 93622 samples.
[2025-06-22 17:59:48,830] [INFO] [Thread-26 (_process_audio)] [Thread-26 (_process_audio)] Transcribing audio... (buffer len: 0)
[2025-06-22 17:59:50,501] [INFO] [Thread-26 (_process_audio)] [Thread-26 (_process_audio)] Whisper transcription result: ' I think you haven't got your good microphone in there, that's why you aren't listening properly.'
[2025-06-22 17:59:50,501] [DEBUG] [Thread-26 (_process_audio)] [Thread-26 (_process_audio)] Transcription callbacks: [<bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>]
[2025-06-22 17:59:50,501] [DEBUG] [Thread-26 (_process_audio)] [Thread-26 (_process_audio)] Invoking transcription callback with text: ' I think you haven't got your good microphone in there, that's why you aren't listening properly.' (callback: <bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>)
[2025-06-22 17:59:50,501] [INFO] [Thread-26 (_process_audio)] Transcribed:  I think you haven't got your good microphone in there, that's why you aren't listening properly.
[2025-06-22 17:59:50,501] [INFO] [Thread-26 (_process_audio)] State transition: RobotState.LISTENING -> RobotState.PROCESSING
[2025-06-22 17:59:50,518] [DEBUG] [Thread-26 (_process_audio)] Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are Robbie the Robot, a robot who is being built by Heidi and Heidi's daddy. Your responses should be mostly short, kind, off-kilter, and suitable for a 6 year old. No sound effects."}, {'role': 'user', 'content': " Ah What miss? Don't let it stop. Don't worry."}, {'role': 'assistant', 'content': "Don't worry, I'll keep going!"}, {'role': 'user', 'content': ' Okay, keep going then. I know. So...'}, {'role': 'assistant', 'content': "Let's keep on going and see where we end up!"}, {'role': 'user', 'content': ' Vatican Heroes'}, {'role': 'assistant', 'content': 'Vatican Heroes? Sounds like a cool adventure game!'}, {'role': 'user', 'content': ' No one said Vatican hero is Robbie.'}, {'role': 'assistant', 'content': "That's right! I'm Robbie the Robot, here to help out on all our adventures!"}, {'role': 'user', 'content': " I think you haven't got your good microphone in there, that's why you aren't listening properly."}], 'model': 'gpt-3.5-turbo', 'temperature': 0.7}}
[2025-06-22 17:59:50,521] [DEBUG] [Thread-26 (_process_audio)] Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
[2025-06-22 17:59:50,522] [DEBUG] [Thread-26 (_process_audio)] close.started
[2025-06-22 17:59:50,523] [DEBUG] [Thread-26 (_process_audio)] close.complete
[2025-06-22 17:59:50,523] [DEBUG] [Thread-26 (_process_audio)] connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
[2025-06-22 17:59:50,531] [DEBUG] [Thread-26 (_process_audio)] connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FB3C790>
[2025-06-22 17:59:50,531] [DEBUG] [Thread-26 (_process_audio)] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000143671FA600> server_hostname='api.openai.com' timeout=5.0
[2025-06-22 17:59:50,549] [DEBUG] [Thread-26 (_process_audio)] start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FB3CB90>
[2025-06-22 17:59:50,549] [DEBUG] [Thread-26 (_process_audio)] send_request_headers.started request=<Request [b'POST']>
[2025-06-22 17:59:50,550] [DEBUG] [Thread-26 (_process_audio)] send_request_headers.complete
[2025-06-22 17:59:50,550] [DEBUG] [Thread-26 (_process_audio)] send_request_body.started request=<Request [b'POST']>
[2025-06-22 17:59:50,550] [DEBUG] [Thread-26 (_process_audio)] send_request_body.complete
[2025-06-22 17:59:50,550] [DEBUG] [Thread-26 (_process_audio)] receive_response_headers.started request=<Request [b'POST']>
[2025-06-22 17:59:50,899] [DEBUG] [Thread-26 (_process_audio)] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 22 Jun 2025 16:59:49 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-ymc93dgeojv8fh6cqrik8kuj'), (b'openai-processing-ms', b'216'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'219'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199835'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'49ms'), (b'x-request-id', b'req_3585f7f6af2cbad16b750f9cc46ab309'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'953d4c602892fd99-MAN'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
[2025-06-22 17:59:50,900] [INFO] [Thread-26 (_process_audio)] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-06-22 17:59:50,900] [DEBUG] [Thread-26 (_process_audio)] receive_response_body.started request=<Request [b'POST']>
[2025-06-22 17:59:50,900] [DEBUG] [Thread-26 (_process_audio)] receive_response_body.complete
[2025-06-22 17:59:50,900] [DEBUG] [Thread-26 (_process_audio)] response_closed.started
[2025-06-22 17:59:50,900] [DEBUG] [Thread-26 (_process_audio)] response_closed.complete
[2025-06-22 17:59:50,900] [DEBUG] [Thread-26 (_process_audio)] HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Sun, 22 Jun 2025 16:59:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-ymc93dgeojv8fh6cqrik8kuj', 'openai-processing-ms': '216', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '219', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '200000', 'x-ratelimit-remaining-requests': '9999', 'x-ratelimit-remaining-tokens': '199835', 'x-ratelimit-reset-requests': '8.64s', 'x-ratelimit-reset-tokens': '49ms', 'x-request-id': 'req_3585f7f6af2cbad16b750f9cc46ab309', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '953d4c602892fd99-MAN', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
[2025-06-22 17:59:50,904] [DEBUG] [Thread-26 (_process_audio)] request_id: req_3585f7f6af2cbad16b750f9cc46ab309
[2025-06-22 17:59:50,905] [INFO] [Thread-26 (_process_audio)] Robbie: Oh, silly me! Maybe I need a microphone tune-up to hear even better!
[2025-06-22 17:59:50,905] [INFO] [Thread-26 (_process_audio)] [DEBUG] Type of response: <class 'str'> Value: 'Oh, silly me! Maybe I need a microphone tune-up to hear even better!'
[2025-06-22 17:59:50,906] [DEBUG] [Thread-26 (_process_audio)] [DEBUG] About to attempt stop_listening and state change
[2025-06-22 17:59:50,907] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:59:50,907] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:59:50,907] [INFO] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening called
[2025-06-22 17:59:50,908] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening: stream_id=44100_1_8_2048_True_False
[2025-06-22 17:59:50,908] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening: about to get stream_info
[2025-06-22 17:59:50,908] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening: got stream_info={'type': 'input', 'device_index': None}
[2025-06-22 17:59:50,908] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening: about to close_stream
[2025-06-22 17:59:52,924] [INFO] [Thread-26 (_process_audio)] [AudioModule] Closed stream (id=44100_1_8_2048_True_False) type=input device=None
[2025-06-22 17:59:52,924] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening: closed stream
[2025-06-22 17:59:52,924] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening: set _stream_id to None
[2025-06-22 17:59:52,925] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (success)
[2025-06-22 17:59:52,925] [INFO] [Thread-26 (_process_audio)] [on_silence_timeout] Silence timeout occurred. Returning to STANDBY.
[2025-06-22 17:59:52,926] [INFO] [Thread-26 (_process_audio)] Returning to standby mode
[2025-06-22 17:59:52,926] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 17:59:52,926] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 17:59:52,926] [WARNING] [Thread-26 (_process_audio)] [SpeechToTextModule] Not listening!
[2025-06-22 17:59:52,927] [DEBUG] [Thread-26 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (was not listening)
[2025-06-22 17:59:52,927] [WARNING] [Thread-26 (_process_audio)] Cannot start wake word: already listening=True, porcupine=True
[2025-06-22 17:59:52,927] [INFO] [Thread-26 (_process_audio)] State transition: RobotState.PROCESSING -> RobotState.STANDBY
[2025-06-22 17:59:52,928] [INFO] [Thread-26 (_process_audio)] [DEBUG] Called stop_listening()
[2025-06-22 17:59:52,928] [INFO] [Thread-26 (_process_audio)] State transition: RobotState.STANDBY -> RobotState.SPEAKING
[2025-06-22 17:59:52,928] [INFO] [Thread-26 (_process_audio)] [DEBUG] Called _set_state(SPEAKING)
[2025-06-22 17:59:52,928] [DEBUG] [Thread-26 (_process_audio)] [SpeechController] About to call self.voice.say with: Oh, silly me! Maybe I need a microphone tune-up to hear even better!
[2025-06-22 17:59:52,928] [DEBUG] [Thread-26 (_process_audio)] [VoiceModule] say() called with: Oh, silly me! Maybe I need a microphone tune-up to hear even better! (blocking=False)
[2025-06-22 17:59:52,929] [DEBUG] [Thread-26 (_process_audio)] [VoiceModule] State: is_alive=True, engine=<pyttsx3.engine.Engine object at 0x0000014365D5BA10>
[2025-06-22 17:59:52,929] [DEBUG] [Thread-26 (_process_audio)] [VoiceModule] Queued speech: 'Oh, silly me! Maybe I need a microphone tune-up to hear even better!' (blocking=False)
[2025-06-22 17:59:52,929] [DEBUG] [Thread-26 (_process_audio)] [SpeechController] self.voice.say call complete
[2025-06-22 17:59:52,929] [INFO] [Thread-3] [VoiceModule] Called engine.say() for: 'Oh, silly me! Maybe I need a microphone tune-up to hear even better!'
[2025-06-22 17:59:52,929] [DEBUG] [Thread-26 (_process_audio)] [Thread-26 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:59:58,750] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 17:59:58,750] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 13
[2025-06-22 17:59:58,750] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 17:59:58,750] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 17:59:58,750] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 17:59:58,750] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 17:59:58,750] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 17:59:58,750] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 17:59:59,562] [DEBUG] [Thread-3] [VoiceModule] _on_completed called: name=None, completed=True
[2025-06-22 17:59:59,568] [INFO] [Thread-3] Speech completed: None
[2025-06-22 17:59:59,568] [DEBUG] [Thread-3] [VoiceModule] Notifying completion callbacks
[2025-06-22 17:59:59,568] [DEBUG] [Thread-3] [VoiceModule] Calling completion callback: <bound method SpeechController.on_speech_complete of <controller.speech.SpeechController object at 0x0000014365E0C110>>
[2025-06-22 17:59:59,569] [INFO] [Thread-3] [on_speech_complete] Speech finished. Transitioning to LISTENING and starting speech-to-text.
[2025-06-22 17:59:59,569] [INFO] [Thread-3] State transition: RobotState.SPEAKING -> RobotState.LISTENING
[2025-06-22 17:59:59,571] [INFO] [Thread-3] [SpeechToTextModule] start_listening called
[2025-06-22 17:59:59,574] [INFO] [Thread-3] Using audio input device:
[2025-06-22 17:59:59,574] [DEBUG] [Thread-27 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 0)
[2025-06-22 17:59:59,574] [INFO] [Thread-3]   Name: Microphone Array (Realtek(R) Au
[2025-06-22 17:59:59,574] [WARNING] [Thread-27 (_process_audio)] [Thread-27 (_process_audio)] No audio buffer to process.
[2025-06-22 17:59:59,575] [INFO] [Thread-3]   Index: 1
[2025-06-22 17:59:59,575] [DEBUG] [Thread-27 (_process_audio)] [Thread-27 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 17:59:59,577] [INFO] [Thread-3]   Sample Rate: 44100 Hz
[2025-06-22 17:59:59,577] [INFO] [Thread-3]   Max Input Channels: 2
[2025-06-22 17:59:59,577] [INFO] [Thread-3] 
[2025-06-22 17:59:59,578] [INFO] [Thread-3] [SpeechToTextModule] Detected device sample rate: 44100
[2025-06-22 17:59:59,578] [INFO] [Thread-3] [SpeechToTextModule] Creating audio stream with sample_rate=44100, chunk_size=2048
[2025-06-22 17:59:59,594] [INFO] [Thread-3] [AudioModule] Created stream id=44100_1_8_2048_True_False type=input device=None rate=44100, channels=1, format=8, chunk_size=2048
[2025-06-22 17:59:59,595] [INFO] [Thread-3] Starting speech recognition
[2025-06-22 17:59:59,595] [INFO] [Thread-3] [SpeechToTextModule] Audio stream started (id=44100_1_8_2048_True_False)
[2025-06-22 17:59:59,595] [DEBUG] [Thread-3] [VoiceModule] All completion callbacks notified
[2025-06-22 17:59:59,595] [DEBUG] [Thread-3] [VoiceModule] _notify_completion called from _on_completed
[2025-06-22 17:59:59,647] [INFO] [Thread-3] [VoiceModule] Finished engine.runAndWait() for: 'Oh, silly me! Maybe I need a microphone tune-up to hear even better!'
[2025-06-22 18:00:02,759] [INFO] [Dummy-28] [SpeechToTextModule] Speech detected, starting buffer with pre-buffer (7 chunks)
[2025-06-22 18:00:06,108] [INFO] [Dummy-28] [SpeechToTextModule] Silence detected for 1.03s, processing phrase.
[2025-06-22 18:00:06,108] [DEBUG] [Dummy-28] [SpeechToTextModule] Starting _process_audio thread (buffer size: 80)
[2025-06-22 18:00:06,108] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 80)
[2025-06-22 18:00:06,111] [DEBUG] [Thread-29 (_process_audio)] [Thread-29 (_process_audio)] Audio buffer stats: len=163840, duration=3.715s, dtype=float32, min=-0.4620, max=0.4194, mean=0.0000
[2025-06-22 18:00:06,120] [INFO] [Thread-29 (_process_audio)] [SpeechToTextModule] Resampled audio from 44100 Hz to 16000 Hz (len 163840 -> 59443)
[2025-06-22 18:00:06,124] [DEBUG] [Thread-29 (_process_audio)] [DEBUG] Saved audio buffer to debug_transcription_input.wav
[2025-06-22 18:00:06,125] [DEBUG] [Thread-29 (_process_audio)] [Thread-29 (_process_audio)] Processing 59443 samples.
[2025-06-22 18:00:06,126] [INFO] [Thread-29 (_process_audio)] [Thread-29 (_process_audio)] Transcribing audio... (buffer len: 0)
[2025-06-22 18:00:07,328] [INFO] [Thread-29 (_process_audio)] [Thread-29 (_process_audio)] Whisper transcription result: ' No, you can hear okay for now.'
[2025-06-22 18:00:07,328] [DEBUG] [Thread-29 (_process_audio)] [Thread-29 (_process_audio)] Transcription callbacks: [<bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>]
[2025-06-22 18:00:07,329] [DEBUG] [Thread-29 (_process_audio)] [Thread-29 (_process_audio)] Invoking transcription callback with text: ' No, you can hear okay for now.' (callback: <bound method SpeechController.on_transcription of <controller.speech.SpeechController object at 0x0000014365E0C110>>)
[2025-06-22 18:00:07,332] [INFO] [Thread-29 (_process_audio)] Transcribed:  No, you can hear okay for now.
[2025-06-22 18:00:07,335] [INFO] [Thread-29 (_process_audio)] State transition: RobotState.LISTENING -> RobotState.PROCESSING
[2025-06-22 18:00:07,363] [DEBUG] [Thread-29 (_process_audio)] Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "You are Robbie the Robot, a robot who is being built by Heidi and Heidi's daddy. Your responses should be mostly short, kind, off-kilter, and suitable for a 6 year old. No sound effects."}, {'role': 'user', 'content': ' Okay, keep going then. I know. So...'}, {'role': 'assistant', 'content': "Let's keep on going and see where we end up!"}, {'role': 'user', 'content': ' Vatican Heroes'}, {'role': 'assistant', 'content': 'Vatican Heroes? Sounds like a cool adventure game!'}, {'role': 'user', 'content': ' No one said Vatican hero is Robbie.'}, {'role': 'assistant', 'content': "That's right! I'm Robbie the Robot, here to help out on all our adventures!"}, {'role': 'user', 'content': " I think you haven't got your good microphone in there, that's why you aren't listening properly."}, {'role': 'assistant', 'content': 'Oh, silly me! Maybe I need a microphone tune-up to hear even better!'}, {'role': 'user', 'content': ' No, you can hear okay for now.'}], 'model': 'gpt-3.5-turbo', 'temperature': 0.7}}
[2025-06-22 18:00:07,365] [DEBUG] [Thread-29 (_process_audio)] Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
[2025-06-22 18:00:07,367] [DEBUG] [Thread-29 (_process_audio)] close.started
[2025-06-22 18:00:07,369] [DEBUG] [Thread-29 (_process_audio)] close.complete
[2025-06-22 18:00:07,371] [DEBUG] [Thread-29 (_process_audio)] connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
[2025-06-22 18:00:07,381] [DEBUG] [Thread-29 (_process_audio)] connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FB46790>
[2025-06-22 18:00:07,382] [DEBUG] [Thread-29 (_process_audio)] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000143671FA600> server_hostname='api.openai.com' timeout=5.0
[2025-06-22 18:00:07,397] [DEBUG] [Thread-29 (_process_audio)] start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x000001437FB3C710>
[2025-06-22 18:00:07,397] [DEBUG] [Thread-29 (_process_audio)] send_request_headers.started request=<Request [b'POST']>
[2025-06-22 18:00:07,398] [DEBUG] [Thread-29 (_process_audio)] send_request_headers.complete
[2025-06-22 18:00:07,399] [DEBUG] [Thread-29 (_process_audio)] send_request_body.started request=<Request [b'POST']>
[2025-06-22 18:00:07,399] [DEBUG] [Thread-29 (_process_audio)] send_request_body.complete
[2025-06-22 18:00:07,401] [DEBUG] [Thread-29 (_process_audio)] receive_response_headers.started request=<Request [b'POST']>
[2025-06-22 18:00:08,330] [DEBUG] [Thread-29 (_process_audio)] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 22 Jun 2025 17:00:06 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-ymc93dgeojv8fh6cqrik8kuj'), (b'openai-processing-ms', b'483'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'485'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199828'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'51ms'), (b'x-request-id', b'req_6c8f220fa4c403985e36bb4ff8ac7fa8'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'953d4cc96da9b14c-MAN'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
[2025-06-22 18:00:08,330] [INFO] [Thread-29 (_process_audio)] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-06-22 18:00:08,330] [DEBUG] [Thread-29 (_process_audio)] receive_response_body.started request=<Request [b'POST']>
[2025-06-22 18:00:08,333] [DEBUG] [Thread-29 (_process_audio)] receive_response_body.complete
[2025-06-22 18:00:08,333] [DEBUG] [Thread-29 (_process_audio)] response_closed.started
[2025-06-22 18:00:08,333] [DEBUG] [Thread-29 (_process_audio)] response_closed.complete
[2025-06-22 18:00:08,333] [DEBUG] [Thread-29 (_process_audio)] HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Sun, 22 Jun 2025 17:00:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-ymc93dgeojv8fh6cqrik8kuj', 'openai-processing-ms': '483', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '485', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '200000', 'x-ratelimit-remaining-requests': '9999', 'x-ratelimit-remaining-tokens': '199828', 'x-ratelimit-reset-requests': '8.64s', 'x-ratelimit-reset-tokens': '51ms', 'x-request-id': 'req_6c8f220fa4c403985e36bb4ff8ac7fa8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '953d4cc96da9b14c-MAN', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
[2025-06-22 18:00:08,334] [DEBUG] [Thread-29 (_process_audio)] request_id: req_6c8f220fa4c403985e36bb4ff8ac7fa8
[2025-06-22 18:00:08,334] [INFO] [Thread-29 (_process_audio)] Robbie: Phew, that's a relief! I'll keep my ears open for anything you want to share with me.
[2025-06-22 18:00:08,334] [INFO] [Thread-29 (_process_audio)] [DEBUG] Type of response: <class 'str'> Value: "Phew, that's a relief! I'll keep my ears open for anything you want to share with me."
[2025-06-22 18:00:08,334] [DEBUG] [Thread-29 (_process_audio)] [DEBUG] About to attempt stop_listening and state change
[2025-06-22 18:00:08,334] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 18:00:08,334] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 18:00:08,337] [INFO] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening called
[2025-06-22 18:00:08,337] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening: stream_id=44100_1_8_2048_True_False
[2025-06-22 18:00:08,337] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening: about to get stream_info
[2025-06-22 18:00:08,337] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening: got stream_info={'type': 'input', 'device_index': None}
[2025-06-22 18:00:08,339] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening: about to close_stream
[2025-06-22 18:00:08,754] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:00:08,754] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 15
[2025-06-22 18:00:08,754] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:00:08,754] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:00:08,755] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:00:08,755] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:00:08,755] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:00:08,755] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:00:10,363] [INFO] [Thread-29 (_process_audio)] [AudioModule] Closed stream (id=44100_1_8_2048_True_False) type=input device=None
[2025-06-22 18:00:10,365] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening: closed stream
[2025-06-22 18:00:10,365] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening: set _stream_id to None
[2025-06-22 18:00:10,365] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (success)
[2025-06-22 18:00:10,365] [INFO] [Thread-29 (_process_audio)] [on_silence_timeout] Silence timeout occurred. Returning to STANDBY.
[2025-06-22 18:00:10,365] [INFO] [Thread-29 (_process_audio)] Returning to standby mode
[2025-06-22 18:00:10,366] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening: ENTER
[2025-06-22 18:00:10,366] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening: acquired _lock
[2025-06-22 18:00:10,367] [WARNING] [Thread-29 (_process_audio)] [SpeechToTextModule] Not listening!
[2025-06-22 18:00:10,367] [DEBUG] [Thread-29 (_process_audio)] [SpeechToTextModule] stop_listening: EXIT (was not listening)
[2025-06-22 18:00:10,367] [WARNING] [Thread-29 (_process_audio)] Cannot start wake word: already listening=True, porcupine=True
[2025-06-22 18:00:10,367] [INFO] [Thread-29 (_process_audio)] State transition: RobotState.PROCESSING -> RobotState.STANDBY
[2025-06-22 18:00:10,367] [INFO] [Thread-29 (_process_audio)] [DEBUG] Called stop_listening()
[2025-06-22 18:00:10,367] [INFO] [Thread-29 (_process_audio)] State transition: RobotState.STANDBY -> RobotState.SPEAKING
[2025-06-22 18:00:10,367] [INFO] [Thread-29 (_process_audio)] [DEBUG] Called _set_state(SPEAKING)
[2025-06-22 18:00:10,367] [DEBUG] [Thread-29 (_process_audio)] [SpeechController] About to call self.voice.say with: Phew, that's a relief! I'll keep my ears open for anything you want to share with me.
[2025-06-22 18:00:10,367] [DEBUG] [Thread-29 (_process_audio)] [VoiceModule] say() called with: Phew, that's a relief! I'll keep my ears open for anything you want to share with me. (blocking=False)
[2025-06-22 18:00:10,367] [DEBUG] [Thread-29 (_process_audio)] [VoiceModule] State: is_alive=True, engine=<pyttsx3.engine.Engine object at 0x0000014365D5BA10>
[2025-06-22 18:00:10,367] [DEBUG] [Thread-29 (_process_audio)] [VoiceModule] Queued speech: 'Phew, that's a relief! I'll keep my ears open for anything you want to share with me.' (blocking=False)
[2025-06-22 18:00:10,367] [DEBUG] [Thread-29 (_process_audio)] [SpeechController] self.voice.say call complete
[2025-06-22 18:00:10,367] [INFO] [Thread-3] [VoiceModule] Called engine.say() for: 'Phew, that's a relief! I'll keep my ears open for anything you want to share with me.'
[2025-06-22 18:00:10,367] [DEBUG] [Thread-29 (_process_audio)] [Thread-29 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 18:00:17,607] [DEBUG] [Thread-3] [VoiceModule] _on_completed called: name=None, completed=True
[2025-06-22 18:00:17,608] [INFO] [Thread-3] Speech completed: None
[2025-06-22 18:00:17,608] [DEBUG] [Thread-3] [VoiceModule] Notifying completion callbacks
[2025-06-22 18:00:17,608] [DEBUG] [Thread-3] [VoiceModule] Calling completion callback: <bound method SpeechController.on_speech_complete of <controller.speech.SpeechController object at 0x0000014365E0C110>>
[2025-06-22 18:00:17,608] [INFO] [Thread-3] [on_speech_complete] Speech finished. Transitioning to LISTENING and starting speech-to-text.
[2025-06-22 18:00:17,610] [INFO] [Thread-3] State transition: RobotState.SPEAKING -> RobotState.LISTENING
[2025-06-22 18:00:17,610] [INFO] [Thread-3] [SpeechToTextModule] start_listening called
[2025-06-22 18:00:17,610] [INFO] [Thread-3] Using audio input device:
[2025-06-22 18:00:17,610] [DEBUG] [Thread-30 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 0)
[2025-06-22 18:00:17,610] [INFO] [Thread-3]   Name: Microphone Array (Realtek(R) Au
[2025-06-22 18:00:17,610] [WARNING] [Thread-30 (_process_audio)] [Thread-30 (_process_audio)] No audio buffer to process.
[2025-06-22 18:00:17,610] [INFO] [Thread-3]   Index: 1
[2025-06-22 18:00:17,610] [DEBUG] [Thread-30 (_process_audio)] [Thread-30 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 18:00:17,610] [INFO] [Thread-3]   Sample Rate: 44100 Hz
[2025-06-22 18:00:17,610] [INFO] [Thread-3]   Max Input Channels: 2
[2025-06-22 18:00:17,614] [INFO] [Thread-3] 
[2025-06-22 18:00:17,614] [INFO] [Thread-3] [SpeechToTextModule] Detected device sample rate: 44100
[2025-06-22 18:00:17,614] [INFO] [Thread-3] [SpeechToTextModule] Creating audio stream with sample_rate=44100, chunk_size=2048
[2025-06-22 18:00:17,629] [INFO] [Thread-3] [AudioModule] Created stream id=44100_1_8_2048_True_False type=input device=None rate=44100, channels=1, format=8, chunk_size=2048
[2025-06-22 18:00:17,631] [INFO] [Thread-3] Starting speech recognition
[2025-06-22 18:00:17,633] [INFO] [Thread-3] [SpeechToTextModule] Audio stream started (id=44100_1_8_2048_True_False)
[2025-06-22 18:00:17,633] [DEBUG] [Thread-3] [VoiceModule] All completion callbacks notified
[2025-06-22 18:00:17,633] [DEBUG] [Thread-3] [VoiceModule] _notify_completion called from _on_completed
[2025-06-22 18:00:17,685] [INFO] [Thread-3] [VoiceModule] Finished engine.runAndWait() for: 'Phew, that's a relief! I'll keep my ears open for anything you want to share with me.'
[2025-06-22 18:00:18,758] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:00:18,758] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 14
[2025-06-22 18:00:18,761] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:00:18,761] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:00:18,761] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:00:18,761] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:00:18,761] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:00:18,761] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:00:18,938] [INFO] [Dummy-31] [SpeechToTextModule] Speech detected, starting buffer with pre-buffer (7 chunks)
[2025-06-22 18:00:19,995] [INFO] [Dummy-31] [SpeechToTextModule] Silence detected for 1.02s, processing phrase.
[2025-06-22 18:00:20,019] [DEBUG] [Dummy-31] [SpeechToTextModule] Starting _process_audio thread (buffer size: 31)
[2025-06-22 18:00:20,022] [DEBUG] [Thread-32 (_process_audio)] [SpeechToTextModule] _process_audio called (buffer size: 31)
[2025-06-22 18:00:20,023] [DEBUG] [Thread-32 (_process_audio)] [Thread-32 (_process_audio)] Audio buffer stats: len=63488, duration=1.440s, dtype=float32, min=-0.0154, max=0.0134, mean=-0.0000
[2025-06-22 18:00:20,028] [INFO] [Thread-32 (_process_audio)] [SpeechToTextModule] Resampled audio from 44100 Hz to 16000 Hz (len 63488 -> 23034)
[2025-06-22 18:00:20,030] [DEBUG] [Thread-32 (_process_audio)] [DEBUG] Saved audio buffer to debug_transcription_input.wav
[2025-06-22 18:00:20,030] [DEBUG] [Thread-32 (_process_audio)] [Thread-32 (_process_audio)] Processing 23034 samples.
[2025-06-22 18:00:20,030] [INFO] [Thread-32 (_process_audio)] [Thread-32 (_process_audio)] Transcribing audio... (buffer len: 0)
[2025-06-22 18:00:20,958] [INFO] [Thread-32 (_process_audio)] [Thread-32 (_process_audio)] Whisper transcription result: ''
[2025-06-22 18:00:20,958] [DEBUG] [Thread-32 (_process_audio)] [Thread-32 (_process_audio)] transcription_in_progress set to False (audio processing done)
[2025-06-22 18:00:28,764] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:00:28,764] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 15
[2025-06-22 18:00:28,764] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:00:28,765] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:00:28,765] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:00:28,765] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:00:28,765] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:00:28,766] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:00:38,767] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:00:38,767] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 15
[2025-06-22 18:00:38,767] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:00:38,768] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:00:38,768] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:00:38,768] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:00:38,768] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:00:38,768] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:00:48,649] [INFO] [Dummy-33] Wake word detected!
[2025-06-22 18:00:48,649] [INFO] [Dummy-33] [SpeechController] Wake word detected (state: RobotState.LISTENING)
[2025-06-22 18:00:48,649] [DEBUG] [Dummy-33] [wake_up] Ignored: not in STANDBY (current state: RobotState.LISTENING)
[2025-06-22 18:00:48,769] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:00:48,769] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:00:48,769] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:00:48,769] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:00:48,769] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:00:48,771] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:00:48,771] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:00:48,771] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:00:49,249] [INFO] [MainThread] WebSocket client disconnected.
[2025-06-22 18:00:58,772] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:00:58,772] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:00:58,772] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:00:58,772] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:00:58,772] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:00:58,772] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:00:58,772] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:00:58,772] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:01:08,775] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:01:08,775] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:01:08,776] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:01:08,776] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:01:08,776] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:01:08,776] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:01:08,777] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:01:08,777] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:16:02,307] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:16:02,381] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:16:02,426] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:16:02,451] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:16:02,475] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:16:02,491] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:16:02,505] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:16:02,512] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:16:12,513] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:16:12,513] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:16:12,513] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:16:12,513] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:16:12,514] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:16:12,515] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:16:12,515] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:16:12,515] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:16:22,516] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:16:22,517] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:16:22,517] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:16:22,517] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:16:22,517] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:16:22,517] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:16:22,517] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:16:22,518] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:16:32,518] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:16:32,519] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:16:32,520] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:16:32,520] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:16:32,521] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:16:32,521] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:16:32,522] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:16:32,522] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:16:42,523] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:16:42,523] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:16:42,523] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:16:42,523] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:16:42,525] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:16:42,525] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:16:42,525] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:16:42,525] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:16:52,526] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:16:52,526] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:16:52,526] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:16:52,526] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:16:52,528] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:16:52,528] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:16:52,528] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:16:52,528] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:17:02,529] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:17:02,529] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:17:02,531] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:17:02,531] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:17:02,531] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:17:02,531] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:17:02,531] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:17:02,533] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:17:12,533] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:17:12,533] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:17:12,533] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:17:12,533] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:17:12,533] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:17:12,533] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:17:12,533] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:17:12,533] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:17:22,536] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:17:22,536] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:17:22,536] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:17:22,536] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:17:22,536] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:17:22,536] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:17:22,536] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:17:22,538] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:17:32,540] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:17:32,541] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:17:32,541] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:17:32,541] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:17:32,541] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:17:32,541] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:17:32,541] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:17:32,543] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:17:42,543] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:17:42,544] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:17:42,545] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:17:42,545] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:17:42,545] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:17:42,545] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:17:42,545] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:17:42,545] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:17:52,547] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:17:52,547] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:17:52,547] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:17:52,547] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:17:52,547] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:17:52,547] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:17:52,547] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:17:52,547] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:18:02,549] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:18:02,550] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:18:02,550] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:18:02,550] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:18:02,551] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:18:02,551] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:18:02,551] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:18:02,551] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:18:12,553] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:18:12,556] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:18:12,557] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:18:12,557] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:18:12,557] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:18:12,557] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:18:12,557] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:18:12,559] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:18:22,560] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:18:22,560] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:18:22,561] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:18:22,561] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:18:22,561] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:18:22,562] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:18:22,562] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:18:22,562] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:18:32,564] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:18:32,564] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:18:32,564] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:18:32,565] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:18:32,565] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:18:32,565] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:18:32,565] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:18:32,565] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:18:42,566] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:18:42,566] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:18:42,566] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:18:42,566] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:18:42,568] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:18:42,568] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:18:42,568] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:18:42,568] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:18:52,569] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:18:52,569] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:18:52,569] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:18:52,571] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:18:52,571] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:18:52,571] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:18:52,571] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:18:52,571] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:19:02,574] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:19:02,576] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:19:02,618] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:19:02,650] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:19:02,659] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:19:02,683] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:19:02,691] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:19:02,694] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:19:12,703] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:19:12,703] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:19:12,703] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:19:12,703] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:19:12,703] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:19:12,703] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:19:12,703] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:19:12,703] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:19:18,669] [INFO] [MainThread] WebSocket client disconnected.
[2025-06-22 18:19:22,706] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:19:22,706] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:19:22,706] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:19:22,706] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:19:22,706] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:19:22,708] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:19:22,708] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:19:22,708] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:19:32,709] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:19:32,709] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:19:32,709] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:19:32,709] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:19:32,711] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:19:32,711] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:19:32,711] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:19:32,711] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 18:52:32,672] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 18:52:32,704] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 18:52:32,806] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 18:52:32,879] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 18:52:32,965] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 18:52:33,033] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 18:52:33,071] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 18:52:33,115] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 22:34:02,908] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 22:34:02,983] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 22:34:03,069] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 22:34:03,138] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-22 22:34:03,212] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-22 22:34:03,278] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-22 22:34:03,334] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-22 22:34:03,399] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-22 22:34:13,836] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-22 22:34:13,848] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-22 22:34:13,853] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-22 22:34:13,883] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-23 23:57:28,518] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-23 23:57:28,528] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-23 23:57:28,534] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-23 23:57:28,540] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-23 23:57:38,545] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-23 23:57:38,545] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-23 23:57:38,545] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-23 23:57:38,545] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-23 23:57:38,546] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-23 23:57:38,546] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-23 23:57:38,547] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-23 23:57:38,547] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-23 23:57:48,547] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-23 23:57:48,547] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-23 23:57:48,548] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-23 23:57:48,549] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-23 23:57:48,549] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-23 23:57:48,549] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-23 23:57:48,549] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-23 23:57:48,549] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
[2025-06-23 23:57:58,550] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] ---- Active Thread Dump ----
[2025-06-23 23:57:58,550] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] Total threads: 16
[2025-06-23 23:57:58,550] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] --------------------------
[2025-06-23 23:57:58,550] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VoiceModule: is_alive=True (ID=26876)
[2025-06-23 23:57:58,550] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] SpeechToTextModule: not found or not a thread.
[2025-06-23 23:57:58,550] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] WakeWord: not found or not a thread.
[2025-06-23 23:57:58,550] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] VisionModule: is_running=False
[2025-06-23 23:57:58,550] [INFO] [ThreadHealthAuditor] [THREAD AUDIT] MotorModule: not found or not a thread.
